a:4:{s:5:"child";a:1:{s:0:"";a:1:{s:3:"rss";a:1:{i:0;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:1:{s:0:"";a:1:{s:7:"version";s:3:"2.0";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:1:{s:0:"";a:1:{s:7:"channel";a:1:{i:0;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:3:{s:0:"";a:5:{s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:89:"This is the company weblog of thoughtbot, a web development business based in Boston, MA.";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:45:"GIANT ROBOTS SMASHING INTO OTHER GIANT ROBOTS";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:9:"generator";a:1:{i:0;a:5:{s:4:"data";s:37:"Tumblr (3.0; @thoughtbot-giantrobots)";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:29:"http://robots.thoughtbot.com/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"item";a:20:{i:0;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:6:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:10:"A shortage";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:5728:"<blockquote>
  <p>If we were in China, would the govt mandate the creation of 100K Ruby developers? This shortage is killing us. - <a href="http://twitter.com/#!/bussgang/status/28880589552">Jeffrey Bussgang</a>, VC at Flybridge Capital Partners</p>
</blockquote>

<p>Demand for developers and designers at web startups is currently outstripping supply.</p>

<p>I believe this is true because most of thoughtbot’s clients are web startups. Most of my programming buddies along the Red Line in Boston/Cambridge work at, or for, web startups.</p>

<h2><a href="http://www.youtube.com/watch?v=tsn9G79CqyY">Widespread Panic</a></h2>

<blockquote>
  <p>If you are a good software engineer, you must move to Silicon Valley. I’ve never before seen such an intense war for talent. Engineers win. - <a href="http://twitter.com/#!/chchien/status/29121654678">Chi-Hua Chien</a>, VC at Kleiner Perkins</p>
</blockquote>

<p>I’m not really tuned in to the subcultures in SOMA, San Francisco or Union Square, New York City but folks there seem to telling the same story.</p>

<h2><a href="http://www.youtube.com/watch?v=OVa4aPVsliA">Down With Disease</a></h2>

<blockquote>
  <p>Considering that the Ruby Community is a group of “doers” – bitching without proposing a solution is weak sauce. - <a href="http://www.engineyard.com/blog/2010/rtfm/">Randall Thomas</a>, good dude at EngineYard</p>
</blockquote>

<p>So there’s a shortage (and let’s be honest: we’re short a few thousand developers, not <a href="http://en.wikipedia.org/wiki/Great_Famine_(Ireland)">a few million potatoes</a>, so in the grand scheme of things, we’re actually riding the gravy train).</p>

<p>I think there’s a simple solution: <strong>Make more developers.</strong></p>

<p>I can think of three ways to do this, and thoughtbot is trying all three:</p>

<ol>
<li>Teach high school and college students.</li>
<li>Teach enterprise/.NET/Java/PHP/Coldfusion developers new tools.</li>
<li>Convert non-technical founders to technical founders.</li>
</ol>
<h2><a href="http://www.youtube.com/watch?v=hjh5FfEP9QA">Give that Boy a Hand</a></h2>

<p>First, thoughtbot partnered with <a href="http://greenhornconnect.com">Greenhorn Connect</a> to organize a free event for 300+ high school and college students called <a href="http://developersdevelopersdevelopersdevelopers.org">Developers Developers Developers Developers</a>. It was held last week, a good time for them to start looking for a full-time job or a summer internship.</p>

<p>The event was a welcome wagon for students into the web community. Folks from places such as Github, GroupMe, Heroku, ITA Software, and Swipely gave rip-roaring talks.</p>

<p>The man himself, John Resig, was there, talking about jQuery and jQuery Mobile. He also hammered home a couple of important messages:</p>

<ul>
<li>Startups are cool and all, but you can contribute to open source no matter what your company looks like, or even if you don’t have a job at all.</li>
<li>Your Github account is a great resume.</li>
</ul>
<h2><a href="http://www.youtube.com/watch?v=Zk-zUDPH_8o">Cissy Strut</a></h2>

<p>Second, thoughtbot partnered with <a href="http://fairhavencapital.com">Fairhaven Capital</a> to offer <a href="http://workshops.thoughtbot.com/fairhaven">Ruby on Rails workshops</a> to local developers who are currently working in .NET, Coldfusion, or PHP. The cool part is that Fairhaven is covering 50% of the cost of the training (usually $1,256) to lower the barrier for developers to make a technology switch.</p>

<p>In addition to doing something nice for Boston, they’re subsidizing accelerated learning. Intensive training can help people learn months faster than they would otherwise.</p>

<p>If you’re interested in attending, you can <a href="http://workshops.thoughtbot.com/fairhaven">apply here</a>.</p>

<h2><a href="http://youtube.com/watch?v=e6jp_Kdadek">The Word</a></h2>

<p>Third, I’ve been telling non-technical founders that “everybody codes”. I’d like the class of “non-technical” founders to be “non-existent.” If a startup wants to want to hire us, I think there’s a higher chance of success if one of the founders commits to learning to code by pair programming with us on their product.</p>

<p>Consider the alternative of a young web company without a technical co-founder. They’re doing some combination of:</p>

<ul>
<li>hiring someone else</li>
<li>looking for a co-founder</li>
<li>learning to do it theselves</li>
</ul>
<p>I’m thinking the best of all worlds is to hire a firm like thoughtbot to build initial iterations of the product while the “non-technical” co-founders learn how to do it themselves from experts, on their own product that they care about.</p>

<p>This model should work because:</p>

<ul>
<li>Something high quality gets built immediately.</li>
<li>Less time is wasted trying to find someone in a competitive market.</li>
<li>Founders control their own destiny after the engagement.</li>
</ul>
<p>We’ve called a similar approach <a href="http://thoughtbot.com/services/">Kick Start</a> in the past, but geared it more towards interviewing and giving hiring recommendations. I don’t think that’s good enough anymore. The founders can’t keep hiring “other people”. A web development firm working with startups should be moving the founding team toward self-sustainability.</p>

<h2><a href="http://www.youtube.com/watch?v=2C3b1fmMmKM">Ain’t Nothing Wrong With That</a></h2>

<p>The three strategies we’re trying are all experimental. They all depend on collaboration. Hopefully, some of them will work and we’ll have some new buddies with whom we can identify problems and dream up solutions.</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/eWRw4_VMuHI/3310910483";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/3310910483";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Tue, 15 Feb 2011 12:12:00 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:7:{i:0;a:5:{s:4:"data";s:4:"ruby";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:13:"ruby on rails";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:17:"startup developer";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:3;a:5:{s:4:"data";s:8:"ruby job";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:4;a:5:{s:4:"data";s:11:"web startup";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:5;a:5:{s:4:"data";s:20:"technical co-founder";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:6;a:5:{s:4:"data";s:24:"non-technical co-founder";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/3310910483";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:1;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:6:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:56:"Better grids: Lessons learned from Design for Developers";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:5487:"<p>After our first Design for Developers workshop in December, <a href="http://robots.thoughtbot.com/post/2167846199/recap-design-for-developers">we shared a few examples</a> of student work we especially liked. 

</p>
<p>The <a href="http://workshops.thoughtbot.com/sections/4">next Design for Developers workshop</a> is just a few weeks away, and I thought it would be interesting to highlight some common problems our first group of students had while working on their projects, specifically around grids.</p>

<p>We asked all students to use the 12 column, 960 grid when designing their pages in order to focus their work. However, it was very common for students to build unnecessarily complex grids instead of taking advantage of the simplicity that the 960 grid offers. Let’s look at four examples of problematic grids, along with strategies for improving them. As you’ll see, the solutions are straightforward: make it simpler!</p>

<h3>The uncomfortable quartet</h3>

<p>The first two examples have a similar problem: they are confused about whether they want to be a 3 or 4 column layout.</p>

<p><img src="http://ui.thoughtbot.com/assets/grids/original-1.png" style="margin: 12px 0 6px 0;"/></p>

<p>In the first example, the three columns on the left group together nicely. But the column on the right doesn’t feel coherent with the rest of the layout.</p>

<p><img src="http://ui.thoughtbot.com/assets/grids/fix-1.png" style="margin: 12px 0 6px 0;"/></p>

<p>My solution? Stick with a uniform 3 column grid. The wider, more regular columns create a better rhythm across the page, and also give you more room to work with. The student who built this page was using the small column on the right for a navigation list. But it would be better to move that elsewhere on the page, and let the content on the left fill the width of the page. Often times using the grid correctly means re-thinking the placement of elements on the page.</p>

<p><img src="http://ui.thoughtbot.com/assets/grids/original-2.png" style="margin: 12px 0 6px 0;"/></p>

<p>The second example is similar, but has even more problems. The three columns on the right stray from the grid in an attempt to fit themselves into a space that is probably too narrow. The contrast with the correctly sized column on the left is awkward.</p>

<p><img src="http://ui.thoughtbot.com/assets/grids/fix-2.png" style="margin: 12px 0 6px 0;"/></p>

<p>In this case, a uniform 3 column grid would also work, as would a uniform 4 column grid. Because a 12 column grid system can be equally divided by both 3 and 4, these column sizes are the most reliable choices when working with the 12 column 960 grid. They will create equal divisions of the page that are wide enough to fit most content, and as we’ll see below, they look good when matched with each other on the same page.</p>

<h3>Mix and (mis)match</h3>

<p>The next two examples suffer from awkward mixing of column groups.</p>

<p><img src="http://ui.thoughtbot.com/assets/grids/original-3.png" style="margin: 12px 0 6px 0;"/></p>

<p> The first example starts with the right approach, using three equally sized columns through the center of the layout. The problem comes with the columns above and below. When mixing columns with different widths, the goal should be a harmony between all elements on the page. Unfortunately, in this example the columns clash with each other.</p>

<p><img src="http://ui.thoughtbot.com/assets/grids/fix-3.png" style="margin: 12px 0 6px 0;"/></p>

<p>The solution is to use column groups that have a more harmonious relationship to each other. We achieve this by matching the 3 column group in the center with a 4 column group below it, and letting the header run the full width of the page. As we said above, 3 and 4 column groupings are often the best choice when working with the 960 grid. The intervals are more regular and we reduce the clash of irregular columns.</p>

<p><img src="http://ui.thoughtbot.com/assets/grids/original-4.png" style="margin: 12px 0 6px 0;"/></p>

<p>In our final example, the middle group of columns is again well defined, but the columns at the top and bottom again clash. The one unit of white space at the top of the page is especially troublesome, as it stops the eye and disrupts the flow of the page.</p>

<p><img src="http://ui.thoughtbot.com/assets/grids/fix-4.png" style="margin: 12px 0 6px 0;"/></p>

<p>Again, the solution is to use a simpler, more consistent approach to the column groups. We want the columns to sit next to each other comfortably, and the lead the eye down the page naturally.</p>

<p>There are of course other solutions to the problems I’ve highlighted. But the best approach is often to remove any complex grid structure in favor of groupings of 3 or 4 columns.</p>

<p>If you browse through the example sites on the official <a href="http://960.gs/">960 grid site</a> you’ll notice that many of them are using a simple 3 or 4 column layout. A straightforward approach to the structure of your page doesn’t have to limit your design. Instead, it provides a solid base that will introduce clarity to your layout. And that’s always beautiful.</p>

<h3>Go deeper</h3>

<p>We encourage developers who are looking to learn more about grid systems and other fundamentals of visual design to sign up for our next  <a href="http://workshops.thoughtbot.com/sections/4">Design for Developers workshop</a>, taking place Feb 21 through 23 at our Boston office.</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/3-IIdwqHbnI/3217276323";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/3217276323";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Thu, 10 Feb 2011 11:13:00 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:2:{i:0;a:5:{s:4:"data";s:5:"grids";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:6:"design";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/3217276323";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:2;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:6:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:43:"Recipe: Delivering email on behalf of users";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:3024:"<p>A recipe for a better user experience in emails sent between users via my Rails app.</p>

<h2>Why?</h2>

<p>When I receive an email from an automated system like a Rails app, it is disorienting if the sender shows up in my email program as “admin” or “donotreply”.</p>

<p>What I want is something like this:</p>

<p><img src="http://ui.thoughtbot.com/assets/reply-to.png" width="600px"/></p>

<h2>Ingredients</h2>

<ul>
<li><a href="http://guides.rubyonrails.org/action_mailer_basics.html">ActionMailer</a></li>
<li>The <a href="https://github.com/bmabey/email-spec">email_spec</a> Ruby gem</li>
</ul>
<h2>Install email-spec</h2>

<p>I’m a fan of Ben Mabey’s email-spec gem, so I’ll install that:</p>

<pre><code>group :test do
  gem 'email_spec'
end
</code></pre>

<p>I create a <code>features/support/email.rb</code> file:</p>

<pre><code>require 'email_spec' # add this line if you use spork
require 'email_spec/cucumber'
</code></pre>

<p>Then generate some step definitions into <code>features/step_definitions/email_steps.rb</code>:</p>

<pre><code>rails generate email_spec:steps
</code></pre>

<h2>Feature</h2>

<p>Now I’ll write my user story:</p>

<pre><code>Scenario: Guitarist shares song with guitarist
  Given the following user exists:
    | name         | email            |
    | Eric Clapton | eric@example.com |
  And I sign in as "eric@example.com/password"
  And I am on the share page for "Layla"
  When I fill in "Share with" with "jimi@example.com"
  And I press "Share Song"
  And "jimi@example.com" opens the email
  Then he should see "Eric Clapton <admin@goodsongs.com>" in the email "From" header
  And he should see "eric@example.com" in the email "Reply-To" header
</code></pre>

<h2>The “From” and “Reply-To” headers</h2>

<p>I think the “From” and “Reply-To” headers can provide a better user experience.</p>

<p>I don’t set the author’s email as the “From” header because I hear it’s bad spam practice to send email on behalf of users in that way. ISPs use the From header (among other things) to determine if the originator is sending spam.</p>

<h2>Making the feature pass</h2>

<p>Ease my worried mind:</p>

<pre><code>class Mailer < ActionMailer::Base
  def share_song(song, friend)
    mail :to       => friend.email,
         :from     => %{"#{song.artist.name}" <admin@goodsongs.com>},
         :reply_to => song.artist.email,
         :subject  => "Good song"
  end
end
</code></pre>

<p>I’ve used this format so the sender’s name shows up in the receiver’s email program:</p>

<pre><code>"Name" <email@example.com>
</code></pre>

<p>In this case, I want Jimi to be able to reply directly to Eric, so I’ve set the “Reply-To” header to be the sender’s address. I’ve explicitly <em>not</em> put the sender’s name in the “Reply-To” header because that doesn’t work.</p>

<p>In other cases, I want the receiver to reply to the email and have that sent through the Rails app, but that’s a story for another day.</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/3pvHUpFSEik/3215611590";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/3215611590";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Thu, 10 Feb 2011 08:00:06 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:6:{i:0;a:5:{s:4:"data";s:5:"email";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:14:"deliverability";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:10:"amazon ses";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:3;a:5:{s:4:"data";s:8:"sendgrid";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:4;a:5:{s:4:"data";s:5:"rails";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:5;a:5:{s:4:"data";s:16:"integration test";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/3215611590";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:3;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:5:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:60:"Introducing Copycopter: let your clients do the copy writing";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:5062:"<p><a href="http://copycopter.com"><img alt="Copycopter" src="http://ui.thoughtbot.com/assets/copycopter-post-image.jpg" style="float: none; display: block; margin: 0 auto; padding: 0"/></a></p>

<p>We’ve worked with quite a few <a href="http://thoughtbot.com/clients/">clients</a> in our time and a repeated issue we run into is managing what we affectionately call “copy.” These little blurbs of text barely make it into the peripheral vision of most programmers, but headings and marketing descriptions can be vitally important from the site owner’s perspective. While developers are obsessing over the best way to create pages, clients are often obsessing over the wording on those pages. Here’s a familiar scenario for most developers:</p>

<blockquote>
  <p><strong>Developer:</strong> Okay, the sign up page is live now. Just click “Sign Up.”</p>
  
  <p><strong>Client:</strong> Looks great, but can it say “Sign Up Now?”</p>
</blockquote>

<p>This is a simple request, but now you have to change the text on the page, possibly correct a few Cucumber scenarios, rerun your test suite, and deploy to staging. Here’s my favorite:</p>

<blockquote>
  <p><strong>Developer:</strong> Okay, it says “Sign Up Now.”</p>
  
  <p><strong>Client:</strong> Actually, I think we should change it back.</p>
</blockquote>

<p>Actually, I lied - that’s a fun scenario, but it’s not my favorite. My favorite is when you get this after another month of development:</p>

<blockquote>
  <p><strong>Developer:</strong> Alright, the sign up page is deployed to production.</p>
  
  <p><strong>Client:</strong> Speaking of sign ups, I talked to a few more people, and I really think it should be “Sign Up Now” after all.</p>
</blockquote>

<p>At this point, do you try to explain that your master branch has features that aren’t ready to go live yet? Do you create a new branch based on the previous stable branch, change your text, deploy that, and then back port the change to master? Do you tell him he’ll just have to wait until the next deploy?</p>

<p>These examples may seem trivial or absurd, but I bet you’re nodding your head in agreement right now. The truth is there’s a lot of development time wasted on this kind of mindless coding. Copy is important and all of these clients requests were simple, so why is this so hard?</p>

<h2>Copycopter saves the day</h2>

<p>We wanted a better experience both for ourselves and for our clients, so we created Copycopter.</p>

<p>Copycopter allows you to write default copy in the application that can later be edited by clients without changing the application code or issuing a new deploy. Setting up an application with Copycopter is simple.</p>

<h3>Sign Up</h3>

<p>Creating a new project takes only a few minutes, and you can <a href="https://copycopter.com/#plans">try Copycopter for free</a>.</p>

<h3>Install</h3>

<p>Copycopter comes with a <a href="http://rubygems.org/gems/copycopter_client">client gem</a> for Ruby applications, so just add it to your Gemfile:</p>

<pre><code>gem "copycopter_client"
</code></pre>

<h3>Configure</h3>

<p>All you need to configure is your project’s API key:</p>

<pre><code>CopycopterClient.configure do |config|
  config.api_key = "81caded18444fc3b60e56622f927bcce"
end
</code></pre>

<h3>Add</h3>

<p>Once your Rails application is linked to a Copycopter project, you can add blurbs using the standard <a href="http://guides.rubyonrails.org/i18n.html">I18n API</a>.</p>

<pre><code><%= link_to t(".sign_up", :default => "Sign Up") %>
</code></pre>

<h3>Edit</h3>

<p>As soon as a you view a page with default copy, the client will create the blurb with the default copy in Copycopter.</p>

<p><img src="http://ui.thoughtbot.com/assets/copycopter_editing.png" alt="Editing copy in Copycopter"/></p>

<p>Any changes you make from Copycopter will automatically be reflected in the live application.</p>

<h3>Deploy</h3>

<p>Copycopter is intended to fit the natural rhythm of developing locally, testing on a staging server, and publishing to production. All blurbs start in a “draft” state, which will be displayed during development and on staging servers. The Copycopter client comes with a deploy task, which will mark all blurbs as published. Adding this task to your production deploy scripts will allow you to naturally move new blurbs to production as you deploy the pages that use them.</p>

<p><img src="http://ui.thoughtbot.com/assets/copycopter_deploy.png" alt="Deploying"/></p>

<p>Of course, if you want to directly change any copy in production, you can do that, too.</p>

<h2>Get to da choppa!</h2>

<iframe title="Get to da choppa" width="600" height="488" src="http://www.youtube.com/embed/Xs_OacEq2Sk" frameborder="0" allowfullscreen style="margin-bottom: 20px"></iframe>

<p>If you’re tired of doing the copy text tango with your clients, <a href="http://copycopter.com">sign up for Copycopter</a> and leave the copy writing to your clients. We hope to see you on the chopper soon! Sign up <s>now</s> now!</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/2tCDdftztF8/3201164937";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/3201164937";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Wed, 09 Feb 2011 13:20:00 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/3201164937";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:4;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:5:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:49:"Delivering email with Amazon SES in a Rails 3 app";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:2727:"<p>We’ve been using and loving <a href="http://sendgrid.com">Sendgrid</a> on all our apps. However, <a href="http://aws.amazon.com/ses/">Amazon SES</a> came out last week and… you know… shiny.</p>

<h2>Why use Amazon SES?</h2>

<p>Right now, price. At our current email rates, we would save more than $10,000 in 2011 using Amazon SES over Sendgrid for <a href="http://hoptoadapp.com">Hoptoad</a>.</p>

<p>However, Sendgrid’s a reliable entity with more features (analytics, spam reports, etc.) so even with that dollar figure staring us in the face, we’re not jumping ship quite yet on Hoptoad.</p>

<p>In the meantime, we’re trying Amazon SES on another project that is in private beta to see how well it performs in terms of deliverability, blacklisting, etc.</p>

<h2>Already plenty of open source libraries</h2>

<p>A week after Amazon announced the service, there were plenty of libraries on Github for Amazon SES. I chose to use <a href="https://github.com/drewblas/aws-ses">drewblas/aws-ses</a> (the <a href="http://rubygems.org/gems/aws-ses">aws-ses gem</a>) for the usual reasons:</p>

<ul>
<li>It works.</li>
<li>It has a decent-looking test suite that makes me believe it will keep working.</li>
</ul>
<p>It’s got some <a href="https://github.com/drewblas/aws-ses/blob/master/lib/aws/ses/extensions.rb">fairly intrusive monkey-patching</a> but hey, it’s only a few days old.</p>

<h2>Comparing Sendgrid implementation in a Rails app</h2>

<p>Another thing that rocks about Sendgrid is how simple it is to use in a Rails app:</p>

<pre><code>ActionMailer::Base.smtp_settings = {
  :address        => "smtp.sendgrid.net",
  :port           => "25",
  :authentication => :plain,
  :user_name      => ENV['SENDGRID_USERNAME'],
  :password       => ENV['SENDGRID_PASSWORD'],
  :domain         => ENV['SENDGRID_DOMAIN']
}
</code></pre>

<p>You don’t need any special gem, it’s just SMTP.</p>

<h2>Using the aws-ses gem in a Rails app</h2>

<p>Amazon SES requires some <a href="http://en.wikipedia.org/wiki/HMAC">HMAC</a>‘ing and other stuff, but when using a library, it’s still pretty easy and it has the same dependencies as Rails.</p>

<p>Add the gem to your Gemfile:</p>

<pre><code>gem "aws-ses", "~> 0.3.2", :require => 'aws/ses'
</code></pre>

<p>Extend ActionMailer in <code>config/initializers/amazon_ses.rb</code>:</p>

<pre><code>ActionMailer::Base.add_delivery_method :ses, AWS::SES::Base,
  :access_key_id     => ENV['AMAZON_ACCESS_KEY'],
  :secret_access_key => ENV['AMAZON_SECRET_KEY']
</code></pre>

<p>Set the delivery method in <code>config/environments/*rb</code>:</p>

<pre><code>config.action_mailer.delivery_method = :ses
</code></pre>

<p>That’ll do it. Happy emailing!</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/4JQt5lBy_B0/3105121049";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/3105121049";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Fri, 04 Feb 2011 09:53:35 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/3105121049";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:5;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:5:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:38:"cURLing with Rails' authenticity_token";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:5878:"<p>Our event, <a href="http://developersdevelopersdevelopersdevelopers.org/">Developers Developers Developers Developers</a>, is this weekend.</p>

<p>When the amount of registrations reached the capacity of the venue, we removed the registration form from the website.</p>

<p>However, we left the Rails route and controller around and encouraged students to register by reading the source code of the application and coding their way in. We pointed them to the staging app so they could practice before registering via the production app.</p>

<p><img alt="D8 registration challenge" src="http://ui.thoughtbot.com/assets/d8-registration-challenge.png" width="600px"/></p>

<h2>Rails’ authenticity_token</h2>

<p>So we just need to POST to <code>/registrations</code> with the right params, right? Right. However, “the right params” needs to include Rails’ <a href="http://stackoverflow.com/questions/941594/understand-rails-authenticity-token">authenticity_token</a>, which the framework <a href="http://guides.rubyonrails.org/security.html#csrf-countermeasures">uses to combat CSRF</a>. The payload also needs to include a cookie because the authenticity_token depends on it.</p>

<p><img alt="Curling" src="http://ui.thoughtbot.com/assets/curling.jpg" width="600px"/></p>

<h2>cURL</h2>

<p>So here’s the cURL solution.</p>

<p>Step 1:</p>

<pre><code>curl <a href="http://dddd-staging.heroku.com">http://dddd-staging.heroku.com</a> --cookie-jar cookie | grep csrf
</code></pre>

<p>That will store the cookies in a file named “cookie” and print out the authenticity_token you need (it’s the value of the content attribute on the csrf-token meta tag):</p>

<pre><code><meta name="csrf-param" content="authenticity_token"/>
<meta name="csrf-token" content="sNMk592JV2wwHn6DPJ8C5oy/hHDnjIlZBOHyngtTbpQ="/>
</code></pre>

<p>Meanwhile, the contents of the cookies file looks like this:</p>

<pre><code># Netscape HTTP Cookie File
# <a href="http://curl.haxx.se/rfc/cookie_spec.html">http://curl.haxx.se/rfc/cookie_spec.html</a>
# This file was generated by libcurl! Edit at your own risk.

#HttpOnly_dddd-staging.heroku.com   FALSE   /   FALSE   0   _dddd_session   BAh7ByIQX2NzcmZfdG9rZW4iMXdNWm5kUWRLWGRWWGlUZSswT0VFRFN6NHl5dkNWL1NuLzZ1alh3c2lndU09Ig9zZXNzaW9uX2lkIiUwNzNmYmI2MTA0MmI5ZTgxNmUxODA0MzJhOTIyNTk2Yw%3D%3D--fb9ee7c9f96cea60d7be43ff87ce1ac9a8e53548
</code></pre>

<p>Step 2:</p>

<pre><code>curl <a href="http://dddd-staging.heroku.com/registrations">http://dddd-staging.heroku.com/registrations</a> --data "registration[name]=Dan Croak&registration[twitter]=croaky&registration[school_name]=Holy Cross&registration[role]=Developer&authenticity_token=sNMk592JV2wwHn6DPJ8C5oy/hHDnjIlZBOHyngtTbpQ=" --cookie cookie
</code></pre>

<p>This adds the authenticity_token and also includes the cookie from the first request.</p>

<p>The output will be the original HTML that we fetched and replaced on the page via Ajax when registration was still open:</p>

<pre><code><div class="student">
  <div class="avatar">
    <img src="http://avatar.statusok.com/croaky?size=73" />
  </div>
  <div class="student-details">
    <div class="name">Dan Croak</div>
    <div class="twitter">@croaky</div>
    <div class="role-and-school">
      Developer, Holy Cross
    </div>
  </div>
  <h2>Thanks for registering! We can't wait to see you!</>
  <h3>Follow @<a href="http://twitter.com/thoughtbot">thoughtbot</a> and @<a href="http://twitter.com/greenhornboston">greenhornboston</a> for updates.</h3>
  <h3>We also invite you to join our private <a href="http://groups.google.com/group/developers-developers-developers-developers">mailing list</a> for speakers and attending students.</h3>
</div>
</code></pre>

<h2>Another Approach: Using Web Inspector</h2>

<p>However, we’re living in the future here, folks.  It’s 2011, and we’ve got a GUI for everything - no need to get Terminal all over your hands.</p>

<p><img alt="This is a web browser, I know this" title="This is a web browser, I know this" src="http://ui.thoughtbot.com/assets/jurassic-park-unix-1.jpg" width="600px"/></p>

<p>So let’s load the site normally in a web browser, view the HTML source to grab that authenticity token, insert a form into the DOM, then submit it.</p>

<p>I’ll be using Chrome and the WebKit Inspector here, but you could also use Firefox and the excellent <a href="http://getfirebug.com">Firebug plugin</a>.</p>

<p>Step 1: Find the authenticity token</p>

<p>Here I view the HTML source and look for the authenticity token in the <code></code> element:</p>

<p><img alt="Auth Token" src="http://ui.thoughtbot.com/assets/d8-auth-token.jpg" width="600px"/></p>

<p>Step 2: Insert a form into the HTML</p>

<p>Here’s the registration form that we’ll add back into the page.  I made sure to insert the right authenticity token:</p>

<pre><code><form action="/registrations" method="POST">
  <input type="text" name="registration[name]"        value="Jason Morrison" />
  <input type="text" name="registration[twitter]"     value="jayunit" />
  <input type="text" name="registration[school_name]" value="RIT" />
  <input type="text" name="registration[role]"        value="Developer" />
  <input type="text" name="authenticity_token" value="iKSXdP4+Ir80ABwsmwvX5LjUKdto3n6p99E/+pgmegI=" />
  <input type="submit" />
</form>
</code></pre>

<p>You can insert the form anywhere.  Let’s overwrite this paragraph:</p>

<p><img alt="Edit HTML" src="http://ui.thoughtbot.com/assets/d8-edit-html.jpg" width="600px"/></p>

<p>Paste in the HTML:</p>

<p><img alt="Pasted HTML" src="http://ui.thoughtbot.com/assets/d8-pasted-html.jpg" width="600px"/></p>

<p>Step 3: Submit the form</p>

<p>Click submit, and you’re off to the races.</p>

<p><img alt="Form Success" src="http://ui.thoughtbot.com/assets/d8-form-success.jpg" width="600px"/></p>

<p>See you at the event!</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/7y8r55cVtII/3035393350";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/3035393350";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Mon, 31 Jan 2011 15:45:00 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/3035393350";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:6;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:5:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:44:"Sweep unused code into the dustbin with rcov";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:6538:"<p>One of the oldest tools in the Ruby testing utility belt is <a href="https://github.com/relevance/rcov">rcov</a>. Most developers know that they can use rcov to find parts of their application code that tests aren’t exercising at all. However, playing with rcov’s options a bit can help you clean up your application after refactoring or removing features. These techniques all rely on a well-tested application, so make sure you start with 100% <a href="http://robots.thoughtbot.com/post/159806234/simple-test-metrics-in-your-rails-app-and-what-they">C0 coverage</a>.</p>

<h2>Aggregate coverage</h2>

<p>If you’re like us, you’re using Cucumber to test drive your applications from the customer’s perspective, and then filling in the gaps with RSpec coverage for edge cases. We’ve grown comfortable with the idea of aggregate C0 coverage between Cucumber and RSpec, with neither tool resulting in 100% coverage by itself. Splitting up coverage like this makes a tool like RCov even more important, but it’s a little trickier to get this working.</p>

<p>RCov supports an <code>--aggregate</code> option that will look at coverage shared between several test runs, regardless of the tool used for testing. If you’re using RSpec, you’ll want a task like this:</p>

<pre><code>RSpec::Core::RakeTask.new(:rspec_aggregate) do |task|
  task.pattern = 'spec/**/*_spec.rb'
  task.rspec_opts = "--format progress"
  task.rcov = true
  task.rcov_opts = "--exclude osx\/objc,spec,gems\/ " +
                   "--rails --aggregate tmp/coverage.data"
end
</code></pre>

<p>You can get Cucumber coverage as well with this guy:</p>

<pre><code>Cucumber::Rake::Task.new(:cucumber_aggregate) do |task|
  task.rcov = true
  task.rcov_opts = "--exclude osx\/objc,gems\/,spec\/,features\/ " +
                   "--rails --aggregate tmp/coverage.data -o 'coverage'"
end
</code></pre>

<p>In case anything goes wrong, you’ll want to clean up coverage in between runs:</p>

<pre><code>task :clean_aggregate do
  rm "tmp/coverage.data" if File.exist?("tmp/coverage.data")
end
</code></pre>

<p>You probably want a task to run these all together:</p>

<pre><code>desc "Run aggregate coverage from rspec and cucumber"
task :rcov => ["rcov:clean_aggregate",
               "rcov:rspec_aggregate",
               "rcov:cucumber_aggregate"]
</code></pre>

<p>Now you can run <code>rake rcov</code> to get an HTML report of your combined RSpec and Cucumber coverage.</p>

<h2>Finding unused application code</h2>

<p>We hit all the “happy paths” with Cucumber, and we generally hit the failure UI as well. For example, we’ll test the successful submission of a form and one failed submission in Cucumber, and then we’ll test all the individual validations that cause the form to fail from RSpec. That approach hits most of the application code with Cucumber, and although just running every line doesn’t indicate decent coverage, it can give you an idea of which parts of the application code are actually in use. You can generate an HTML report of application code that isn’t reached by Cucumber using a task like this:</p>

<pre><code>desc "Find potentially unused app code"
Cucumber::Rake::Task.new(:unused) do |task|
  task.rcov = true
  task.rcov_opts = "--exclude osx\/objc,spec,gems\/,features\/ " +
                   "--rails --only-uncovered"
end
</code></pre>

<p>This will generate a report for each file containing potentially unused application.</p>

<p>Here’s an example line from a generated coverage/index.html:</p>

<p><img src="http://ui.thoughtbot.com/assets/unused_file.png" alt="Unused file"/></p>

<div style="clear: both"></div>

<p>If you click on the file, you’ll see unused portions highlighted in red:</p>

<p><img src="http://ui.thoughtbot.com/assets/unused_app_code.png" alt="Unused application code"/></p>

<div style="clear: both"></div>

<p>We rely on combined coverage from Cucumber and RSpec, but anything that isn’t used in Cucumber is worth checking out. In this example, we quickly found out that this method could be removed. Removing unused methods and classes is a cheap and effective way to keep your application code small and readable.</p>

<h2>Finding unused Cucumber step definitions</h2>

<p>Cucumber’s mapped step definitions are useful for rapid testing without considering the implementation up front. However, an evolving application quickly develops a set of step definitions that aren’t used, cluttering up the features directory and slowing things down. You can use rcov to quickly identify steps that aren’t in use.</p>

<pre><code>desc "Find unused cucumber step definitions"
Cucumber::Rake::Task.new(:steps) do |task|
  task.rcov = true
  task.rcov_opts = "--exclude osx\/objc,spec,gems\/,app\/,lib\/" +
                   "--rails --only-uncovered"
end
</code></pre>

<p>Notice that we added the <code>app</code> and <code>lib</code> directories, to ignore application code that isn’t exercised by Cucumber, and removed the <code>features</code> directory, so that it complains about unused feature code.</p>

<p>If you open coverage/index.html and click around, you’ll find steps highlighted in red:</p>

<p><img src="http://ui.thoughtbot.com/assets/unused_step.png" alt="Unused step definition"/></p>

<div style="clear: both"></div>

<p>If something is in red, it’s guaranteed that your test suite isn’t using it. You may want to keep some steps around that are never used (such as debugging steps), but most can safely be removed. Doing this regularly can keep your step definitions under control.</p>

<h2>Taking things further</h2>

<p>These examples are all wrapped up in Gist so that you can see them together: <a href="https://gist.github.com/795435">https://gist.github.com/795435</a></p>

<p>If you have improvements or corrections, please fork away!</p>

<p>There are a few other useful options in rcov:</p>

<ul>
<li>
<code>--text-coverage</code> - print coverage to the console. Useful for terminal-oriented developers or for continuous integration. If you’re running this on CI, you may want to also add <code>--no-color</code>, which will disable ASCII color codes in the output.</li>
<li>
<code>--text-report</code> - print a summary to the console.</li>
<li>
<code>--only-uncovered</code> - removes files from the report with 100% coverage. Particularly useful when printed to the console or on CI.</li>
</ul>
<p>Do you use rcov for anything else besides ensuring C0 coverage? If you have a cool recipe using rcov, let us know.</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/K4FzlIaD1Bk/2941220520";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2941220520";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Wed, 26 Jan 2011 10:41:22 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2941220520";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:7;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:5:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:27:"Feature branch code reviews";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:3209:"<p>“Code review.” My knee-jerk reaction to that phrase? Nap time.</p>

<div align="center"><img alt="Sleepy Parliament" src="http://ui.thoughtbot.com/assets/sleepy-parliament.jpg"/></div>

<p>I’ll be honest, I never really felt engaged during “code review” meetings at the end of an iteration. It always took too long to get and discuss the code. The room would get warmer. We’d discover things we’d want to change. Many of those changes would never be made.</p>

<p>Since today is <a href="http://boycottameetingday.com">Boycott a Meeting Day</a>, I thought I’d offer an alternative we’ve used lately.</p>

<p>Here’s the flow. Read <a href="http://blog.hasmanythrough.com/2008/12/18/agile-git-and-the-story-branch-pattern">Josh Susser’s post</a> for the git commands.</p>

<ol>
<li>Start a user story.</li>
<li>Code the feature.</li>
<li>Push the feature to a branch.</li>
<li>A Github hook starts a CI build.</li>
<li>A <a href="https://github.com/blog/570-campfire-service-hook-returns">Github Campfire hook</a> posts your work to Campfire.</li>
<li>Click the link that’s in Campfire.</li>
<li><strong>Click the Github “Pull Request” button.</strong></li>
<li><strong>It will smartly select all commits in your branch that are not in master.</strong></li>
<li><strong>Create the pull request.</strong></li>
<li><strong>Ask your team in Campfire for a review of the pull request.</strong></li>
<li><strong>The team comments in-line, right on the code.</strong></li>
<li>Make the suggested changes.</li>
<li>Merge into master.</li>
<li>Push to master.</li>
<li>CI runs again.</li>
<li>Deploy to staging.</li>
</ol>
<p>Many teams use this “feature branch” pattern. The “code review” part is the Github pull request flow stuck right before the code goes into master.</p>

<p>Here’s what a pull request looks like:</p>

<p><img alt="Pull Request" src="http://ui.thoughtbot.com/assets/pull-request.png" width="600px"/></p>

<p>Notice the <code>jm-cm-client-sets-up-recurring-payment</code> branch is compared to master.</p>

<p>And here’s what a comment on a commit looks like:</p>

<p><img alt="Commit comment" src="http://ui.thoughtbot.com/assets/commit-comment.png" width="600px"/></p>

<p>You could use normal git tools to check out a team member’s feature branch, view the history, etc., but Github one-ups bare git by adding a streamlined user interface and commenting.</p>

<h2>Why we like it</h2>

<p>Test-Driven Development moves code failure earlier in the development process. It’s better to have a failing test on your development machine than in production. It also allows you to have tighter feedback cycles.</p>

<p>Code reviews that happen right before code goes into master offer similar benefits:</p>

<ul>
<li>The whole team learns about new code as it is written.</li>
<li>Mistakes are caught earlier.</li>
<li>Coding standards are more likely to be established, discussed, and followed.</li>
<li>Feedback from this style of code review is far more likely to be applied.</li>
<li>No one forgets context (“Why did we write this?”) since it’s fresh in the author’s mind.</li>
</ul>
<p>I’ve personally loved this process. Give it a shot!</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/QuX4QBvuejE/2831837714";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2831837714";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Wed, 19 Jan 2011 17:19:55 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2831837714";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:8;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:6:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:19:"A Tmux Crash Course";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:4643:"<p>I’ve been using Tmux for about six months now and it has become just as essential to my workflow as vim.  Pane and window management, copy-mode for navigating output, and session management make it a no-brainer for those who live in the terminal (and especially vim).  I’ve compiled a list of tmux commands I use daily to help me work more efficiently.</p>

<p><img src="http://ui.thoughtbot.com/assets/tmux-panes.png" alt="Tmux Panes"/></p>

<p>If a tmux command I mention is bound to a keyboard shortcut by default, I’ll note that in parenthesis.</p>

<h2>Session Management</h2>

<p>Sessions are useful for completely separating work environments.  I have a ‘Work’ session and a ‘Play’ session; in ‘Work’, I keep everything open that I need during my day-to-day development, while in ‘Play’, I keep open current open-source gems or other work I hack on at home.</p>

<dl>
<dt><code>tmux new -s session_name</code></dt>
  <dd>creates a new tmux session named session_name</dd>
  <dt><code>tmux attach -t session_name</code></dt>
  <dd>attaches to an existing tmux session named session_name</dd>
  <dt><code>tmux switch -t session_name</code></dt>
  <dd>switches to an existing session named session_name</dd>
  <dt><code>tmux list-sessions</code></dt>
  <dd>lists existing tmux sessions</dd>
  <dt><code>tmux detach (prefix + d)</code></dt>
  <dd>detach the currently attached session</dd>
</dl>
<h2>Windows</h2>

<p>Tmux has a tabbed interface, but it calls its tabs “Windows”.  To stay organized, I rename all the windows I use; if I’m hacking on a gem, I’ll name the window that gem’s name.  The same thing goes for client applications.  That way, I can recognize windows by context and not what application it’s running.</p>

<dl>
<dt><code>tmux new-window (prefix + c)</code></dt>
  <dd>create a new window</dd>
  <dt><code>tmux select-window -t :0-9 (prefix + 0-9)</code></dt>
  <dd>move to the window based on index</dd>
  <dt><code>tmux rename-window (prefix + ,)</code></dt>
  <dd>rename the current window</dd>
</dl>
<h2>Panes</h2>

<p>Panes take my development time from bland to awesome.  They’re the reason I was able to uninstall MacVim and develop solely in iTerm2.  I don’t have to switch applications to switch contexts (editing, reading logs, IRB, etc.) - everything I do, I do in a terminal now.  People argue that OS X’s Cmd+Tab is just as fast, but I don’t think so.</p>

<dl>
<dt><code>tmux split-window (prefix + ")</code></dt>
  <dd>splits the window into two vertical panes</dd>
  <dt><code>tmux split-window -h (prefix + %)</code></dt>
  <dd>splits the window into two horizontal panes</dd>
  <dt><code>tmux swap-pane -[UDLR] (prefix + { or })</code></dt>
  <dd>swaps pane with another in the specified direction</dd>
  <dt><code>tmux select-pane -[UDLR]</code></dt>
  <dd>selects the next pane in the specified direction</dd>
  <dt><code>tmux select-pane -t :.+</code></dt>
  <dd>selects the next pane in numerical order</dd>
</dl>
<h2>Helpful Tmux commands</h2>

<dl>
<dt><code>tmux list-keys</code></dt>
  <dd>lists out every bound key and the tmux command it runs</dd>
  <dt><code>tmux list-commands</code></dt>
  <dd>lists out every tmux command and its arguments</dd>
  <dt><code>tmux info</code></dt>
  <dd>lists out every session, window, pane, its pid, etc. </dd>
  <dt><code>tmux source-file ~/.tmux.conf</code></dt>
  <dd>reloads the current tmux configuration (based on a default tmux config)</dd>
</dl>
<h2>Must-haves</h2>

<p>These are some of my must-haves in my tmux config:</p>

<pre><code># remap prefix to Control + a
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# force a reload of the config file
unbind r
bind r source-file ~/.tmux.conf

# quick pane cycling
unbind ^A
bind ^A select-pane -t :.+
</code></pre>

<h2>Workflow</h2>

<p>During the day, I’ll work on one or two Rails apps, work on my dotfiles, run irssi, and maybe run vim in another window to take notes for myself. As I mentioned, I run all of this inside one tmux session (named work) and switch between the different windows throughout the day.</p>

<p>When I’m working on any Ruby work specifically, I’ll have a 75%/25% vertical split for vim and a terminal so I can run tests, interact with git, and code. If I run tests or ‘git diff’ and want to see more output than the 25% allots me, I’ll use tmux to swap the panes and then move into copy mode to see whatever I need to see.</p>

<p>Finally, I run <a href="http://sites.google.com/site/iterm2home/">iTerm2</a> in full-screen mode.  Switching between OS X apps for an editor and a terminal is for chumps!</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/h847Icjo90M/2641409235";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2641409235";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Tue, 18 Jan 2011 10:13:00 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:2:{i:0;a:5:{s:4:"data";s:11:"development";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:4:"tmux";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2641409235";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:9;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:6:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:26:"DIY @font-face web service";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:5449:"<p><a href="http://thoughtbot.com/about/#plapier">Phil</a> recently designed <a href="http://developersdevelopersdevelopersdevelopers.org/">Developers Developers Developers Developers</a>, an event we’re running for Boston-area high school and college students:</p>

<p><img src="http://ui.thoughtbot.com/assets/d8-screenshot.png" width="600"/></p>

<p>It looks awesome in part because of liberal use of <a href="http://www.w3.org/TR/css3-fonts/">@font-face</a>.</p>

<p>These days, it’s simple to use @font-face. Just use a stylesheet referencing a web service like <a href="http://code.google.com/webfonts">Google Font Directory</a>:</p>

<pre><code><link href='http://fonts.googleapis.com/css?family=Lobster&subset=latin' rel='stylesheet' type='text/css'> 
</code></pre>

<p>… then use the font as part of a normal CSS font stack:</p>

<pre><code>#schedule .event-time {
  font-family: 'Lobster', arial, sans-serif;
}
</code></pre>

<h2>What if the font isn’t on an @font-face web service?</h2>

<p>There are plenty of commercial @font-face web services, which <a href="http://thoughtbot.com/about/#kylefiedler">Kyle</a> has <a href="http://robots.thoughtbot.com/post/673335945/the-mess-of-web-font-services">covered in detail</a>.</p>

<p>However, there are cases where the font you want to use isn’t on an existing service. Or, the font you want to use requires explicit permission from the font’s creator before you can use it.</p>

<p>We ran into this problem on Developers Developers Developers Developers.</p>

<h2>First attempt: serve fonts from the app</h2>

<p>To solve it, we included the font files in our git repository. This worked, but wasn’t ideal:</p>

<ul>
<li>Unnecessarily adds large files to the repo.</li>
<li>No HTTP caching by default, downloading font files on subsequent requests.</li>
<li>Repetition. Soon after, I wanted to use League Gothic again on another app.</li>
</ul>
<h2>Second attempt: serve fonts directly from Amazon S3</h2>

<p>So our next attempt was to upload the @font-face stylesheet and font files to S3 and serve them directly from there like:</p>

<pre><code><link href='http://our-bucket.s3.amazonaws.com' type='text/css'>
</code></pre>

<p>At first, this seemed to work well. We could set some HTTP headers to handle caching and everything seemed like it was in the right place:</p>

<ul>
<li>application code in version control</li>
<li>assets in an asset host (S3)</li>
</ul>
<p>However, Firefox (and probably some versions of IE), balks at this technique because of the <a href="http://en.wikipedia.org/wiki/Same_origin_policy">same origin policy</a>.</p>

<p>On S3, you’re not allowed to tweak the <code>Access-Control-Allow-Origin</code> HTTP header to allow Firefox to serve your font from S3. There’s a <a href="https://forums.aws.amazon.com/message.jspa?messageID=160131">long Amazon thread</a> where S3 customers are asking for this ability.</p>

<p>However, even if you could set the <code>Access-Control-Allow-Origin</code> header on S3, you also want the <code>Content-Type</code>, <code>Cache-Control</code>, and <code>Expires</code> to all also be set in a standard way. It’s a pain to have to do that manually.</p>

<h2>Solution: serve fonts from a DIY web service</h2>

<p>Our final solution was a small Sinatra app called <a href="https://github.com/thoughtbot/fistface">Fist Face</a>. It is now open source under the MIT License and it solves all the problems we experienced.</p>

<h2>Fist Face</h2>

<p><img alt="Greatest boxer alive" src="http://ui.thoughtbot.com/assets/pacquiao-punch.jpg" width="600"/></p>

<p>It works exactly the same way as Google Font Directory, Typekit, or any other @font-face web service, except that you have full control over it:</p>

<pre><code><link href='http://your-font-face-service.com/league-gothic.css' rel='stylesheet' type='text/css'>
</code></pre>

<p>To use Fist Face, this is all you have to write:</p>

<pre><code># Gemfile
source "http://rubygems.org"
gem "sinatra",  "~> 1.1"
gem "fistface", "~> 1.0"

# config.ru
require 'rubygems'
require 'bundler'
Bundler.require
run FistFace
</code></pre>

<p>Then deploy it. Follow a few conventions in the <a href="https://github.com/thoughtbot/fistface">README</a> regarding your asset host (ex: S3) and a few minutes later, you’ll be serving fonts via your own @font-face web service.</p>

<h2>Why would I want to do it myself?</h2>

<p>If you’ve run into the same issues that we did, have you solved this problem differently?</p>

<p>Among the weaknesses of this approach are:</p>

<ul>
<li>No CDN. (patches welcome!)</li>
<li>Up to you to write a decent cross-browser CSS file.</li>
<li>The font files you use might be old-school (not “hinted” for computer screens).</li>
<li>Requires deeper knowledge of typefaces.</li>
</ul>
<p>With an open mind, the last weakness is actually a strength. Typography is pretty interesting. You’ve got all these <a href="http://www.quora.com/Which-are-some-great-independent-type-foundries">independent type foundries</a> doing beautiful work and some release their fonts for free under permissive licensing.</p>

<p>In that way, hunting great typefaces for your @font-face web service is like building your own art collection. It can differentiate your work.</p>

<p>So, when your friends ask you, “whoa, what font is that?”, you can tell them, “you’ve probably never heard of it” … which I’ve heard is hip.</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/oUEcg4CILcQ/2745188601";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2745188601";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Fri, 14 Jan 2011 10:37:00 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:7:{i:0;a:5:{s:4:"data";s:10:"@font-face";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:11:"web service";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:6:"heroku";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:3;a:5:{s:4:"data";s:10:"HTTP cache";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:4;a:5:{s:4:"data";s:7:"sinatra";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:5;a:5:{s:4:"data";s:6:"amazon";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:6;a:5:{s:4:"data";s:2:"s3";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2745188601";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:10;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:5:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:47:"Fetching source index for http://rubygems.org/ ";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:6799:"<p>Like you, I’ve sat at my terminal watching <a href="http://gembundler.com">Bundler</a> emit this post’s title and do nothing for quite a while. Imagine what we could be doing instead of waiting for dependencies to resolve! I’m out of ideas already, I love resolving dependencies.</p>

<h2>Why it’s slow</h2>

<p>It’s actually not Bundler that is slow…it’s RubyGems itself. To understand why this process takes a long time, you need a bit of a history lesson with how RubyGems handles its index of gems. There are three indexes available:</p>

<ul>
<li>Latest index (newest versions for a given gem on a given platform)</li>
<li>Big index (all versions for all gems on all platforms)</li>
<li>Prerelease index (only prerelease gems for all gems on all platforms)</li>
</ul>
<p>Usually we just need to request the “latest” index when you <code>gem install</code> something. However, Bundler needs the big index. This has a serious size difference though:</p>

<pre><code>% wget <a href="http://rubygems.org/latest_specs.4.8.gz">http://rubygems.org/latest_specs.4.8.gz</a>
% wget <a href="http://rubygems.org/specs.4.8.gz">http://rubygems.org/specs.4.8.gz</a>
% du -h *
172K    latest_specs.4.8.gz
436K    specs.4.8.gz</code></pre>

<p>These indexes are big gzipped and <code>Marshal</code>‘d arrays of the gem name, version and platform. Our first slowdown is actually in parsing this huge array.</p>

<pre><code>% irb -rubygems -rbenchmark
>> Benchmark.bmbm { |x| x.report { Marshal.load(Gem.gunzip(File.read("specs.4.8.gz"))) } }
Rehearsal ------------------------------------
   2.250000   0.050000   2.300000 (  2.321536)
--------------------------- total: 2.300000sec

       user     system      total        real
   2.280000   0.030000   2.310000 (  2.299291)</code></pre>

<p>Once unzipped/unpacked, the entries in that array usually look like:</p>

<pre><code>["rails", Gem::Version.new("3.0.3"), "ruby"]</code></pre>

<p>Bundler also needs a given gem’s dependencies. If you haven’t noticed already, those dependencies aren’t in the index at all, they’re in the gemspecs, which are stored individually at a completely different location, also gzipped and <code>Marshal</code>‘d.</p>

<pre><code>% irb -rubygems -ropen-uri -rpp
>> open("http://rubygems.org/quick/Marshal.4.8/rails-3.0.0.gemspec.rz").read
=> "x\234\225\223Mo\323@\020\206\vT\37..."
>> Gem.inflate(_)
=> "\004\bu:\027Gem::Specification\002..."
>> Marshal.load(_)
=> #<Gem::Specification:0x101377830 @license=[], @extensions=[], ...
>> pp _.dependencies
[Gem::Dependency.new("activesupport", Gem::Requirement.new(["= 3.0.0"]), :runtime),
 Gem::Dependency.new("actionpack", Gem::Requirement.new(["= 3.0.0"]), :runtime),
 Gem::Dependency.new("activerecord", Gem::Requirement.new(["= 3.0.0"]), :runtime),
 Gem::Dependency.new("activeresource", Gem::Requirement.new(["= 3.0.0"]), :runtime),
 Gem::Dependency.new("actionmailer", Gem::Requirement.new(["= 3.0.0"]), :runtime),
 Gem::Dependency.new("railties", Gem::Requirement.new(["= 3.0.0"]), :runtime),
 Gem::Dependency.new("bundler", Gem::Requirement.new(["~> 1.0.0"]), :runtime)]</code></pre>

<p>So that’s basically how RubyGems figures out dependencies out to a N level, it has to make separate requests to each gemspec and continue to jump through until all possibilities are exhausted. At some point when you <code>gem install</code> a gem, add <code>-V</code> on and you’ll see all of these requests happening.</p>

<p>Those requests obviously take a lot of time, no matter how good Bundler’s resolver algorithm gets. I think we’ve pushed this system to its limits, and the fact that it does complete resolves in a reasonable amount of time is impressive.</p>

<h2>What you can do</h2>

<p>So it’s still slow. My general advice is to:</p>

<ul>
<li>Check in your <code>vendor/cache</code> directory with your .gem files. If <code>bundle install</code> doesn’t make one, force it with <code>bundle pack</code>.</li>
<li>On new installs, CI runs, and deploys, use <code>bundle --local</code> which will attempt to resolve using only <code>vendor/cache</code>
</li>
<li>Lock down to specific versions (or use the <a href="http://robots.thoughtbot.com/post/2508037841/twiddle-wakka">twiddle-wakka</a>) in your Gemfile</li>
</ul>
<h2>What we have done about it</h2>

<p>From the RubyGems side, I think we’ve done a good thing by making the long requests go out to CloudFront, so big gems get a CDN boost. However, all requests being are still being made to the Gemcutter server at RackSpace before being redirected to S3/CloudFront, so the network latency with that request doesn’t help those outside of the US get their gems faster.</p>

<p>At <a href="http://capeco.de/">Cape Code</a>, <a href="http://thoughtbot.com/about/#mmongeau">Matt</a> and I worked on <a href="https://github.com/rubygems/gemcutter/compare/ba52664824905361288e...bc15cd0c9d482df66ed0">a new resolver endpoint</a> for Bundler. The idea was that Bundler could make a request to this new API that would return one level of dependencies for a given set of gems. We can’t move the entire Bundler resolver algorithm to the server side, but this could cut down the number of requests it needs to make out for gemspecs.</p>

<p>This will speed things up a bit, but it doesn’t solve the root problem here.</p>

<h2>What needs to happen</h2>

<p>What we really need is:</p>

<ol>
<li>A better indexing scheme</li>
<li>A mirroring system that isn’t horrible (read: round robin DNS)</li>
</ol>
<p>RubyGems definitely needs a better indexing scheme, but this is difficult since making the client support it is going to be rough (and we have to worry about backwards compatability!)</p>

<p>Thankfully, our server is now in Ruby (one of the first goals of the Gemcutter project) so we can iterate rapidly and drop the changes into a gem plugin (think <code>gem fast_install rails</code>). I’ve been talking to some fellow robots here about some possibilities (differential indices for one) but we need to bang some code out soon.</p>

<p>I’m looking into getting a mirroring system set up, but as always, we need contributors to help. My first stop has been with <a href="http://mirrorbrain.org">MirrorBrain</a>, but I’m open to anything that works and will be easy to setup. My only real requirement is that it takes < 1 minute to get a gem distributed. Perhaps we need BitTorrent? The gem files are small (most are way under 1MB) so I can’t see that as being hard to accomplish.</p>

<p>My goal is to get rid of at least one of these problems in 2011. Want to help? Hop on IRC (<a href="irc://irc.freenode.net/rubygems">#rubygems on irc.freenode.net</a>) and the <a href="http://groups.google.com/group/gemcutter">Gemcutter mailing list</a> as well.</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/VEBYHLlnF1I/2729333530";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2729333530";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Thu, 13 Jan 2011 09:53:53 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2729333530";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:11;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:6:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:29:"Make CSS3 buttons like a boss";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:7707:"<p>High-quality interface elements are a great way to add that extra bit of refinement to a website. I’ve been maintaining a <a href="http://ubuwaits.github.com/css3-buttons/">repo of CSS3 buttons</a> for the past few months and I’m starting to see them slowly make their way out into the real world. This tutorial is going to give you a deeper understanding of the design thinking that goes into making these buttons and show you how to make them from scratch.</p>

<p>For this tutorial, we’re going to be building the button that Peter Vidani recently named <a href="http://blog.petervidani.com/post/2688504833/id-like-to-name-apples-download-button">2010 Button of the Year</a>. As you can see, we’re aiming for an almost exact reproduction of the image-based button that appears on the <a href="http://www.apple.com/itunes/">Apple website</a>:</p>

<p><a href="http://ui.thoughtbot.com/assets/css3-buttons/"><img src="http://ui.thoughtbot.com/assets/css3-buttons/css3-button-1.png" style="margin-top: 4px; margin-bottom: 8px;"/></a></p>

<h3 style="text-align: center; margin-top: 0; margin-bottom: 24px;"><a href="http://ui.thoughtbot.com/assets/css3-buttons/">Take a look at the live button</a></h3>

<h3>Mind your light sources</h3>
<p>When designing buttons and other interface elements, it’s important to be consistent about where the light source on your page is coming from. If you look at the button we’re building, you can see that the light source is coming from directly overhead. This means there is a slight highlight at the top edge of the button, the background color goes from lightest at the top to darkest at the bottom, and there is a slight shadow underneath the button. We’ll make sure to keep the light source consistent as we add the hover and active states later on.</p>

<p>Let’s look at the code for the normal state of the button.</p>

<p>First, we use CSS3 background gradients for Mozilla and WebKit, with a solid color for all other browsers. 

</p>
<pre><code class="css">button {
  background: #3b88d8;
  background: -moz-linear-gradient(0% 100% 90deg, #377ad0, #52a8e8);
  background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#52a8e8), to(#377ad0));
}</code></pre>
      
<p>Next, we add the border color. Keeping in mind the light source concerns we mentioned above, the top border is slightly lighter than the bottom edge, with the left and right edges being somewhere in between these two values.</p>

<pre><code class="css">button {
  border-top: 1px solid #4081af;
  border-right: 1px solid #2e69a3;
  border-bottom: 1px solid #20559a;
  border-left: 1px solid #2e69a3;
}</code></pre>

<p>We then add two box shadows: one to create the slight highlight at the top of the button and another for the drop shadow underneath the bottom. 

</p>
<pre><code class="css">button {
  -moz-box-shadow: inset 0 1px 0 0 #72b9eb, 0 1px 2px 0 #b3b3b3;
  -webkit-box-shadow: inset 0 1px 0 0 #72b9eb, 0 1px 2px 0 #b3b3b3;
}</code></pre>

<p>Finally, the text shadow declaration. Because we want the text to appear slightly inset into the button, we add a slight shadow at the top of the text. If we wanted the text to appear raised, our shadow would have gone at the bottom.</p>

<pre><code class="css">button {
  text-shadow: 0 -1px 1px #3275bc;
}</code></pre>
      
<h3>Next, let’s look at the hover state of the button</h3>

<p><a href="http://ui.thoughtbot.com/assets/css3-buttons/"><img src="http://ui.thoughtbot.com/assets/css3-buttons/css3-button-2.png" style="margin-top: 4px;"/></a></p>
      
<p>For the hover state, we want to imagine that as we move our mouse over the button, we cast a slight shadow on it, causing it to get darker. This means that we need to make the background, border, box shadow and text shadow all a bit darker. We also want to change the cursor style to what you normally see when hovering over a link, to reinforce the clickability of the button.</p>

<pre><code class="css">button:hover {
  background: #2a81d7;
  background: -moz-linear-gradient(0% 100% 90deg, #206bcb, #3e9ee5);
  background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#3e9ee5), to(#206bcb));
  border-top: 1px solid #2a73a6;
  border-right: 1px solid #165899;
  border-bottom: 1px solid #07428f;
  border-left: 1px solid #165899;
  -moz-box-shadow: inset 0 1px 0 0 #62b1e9;
  -webkit-box-shadow: inset 0 1px 0 0 #62b1e9;
  cursor: pointer;
  text-shadow: 0 -1px 1px #1d62ab;
}</code></pre>      

<h3>Now, the active state</h3>

<p><a href="http://ui.thoughtbot.com/assets/css3-buttons/"><img src="http://ui.thoughtbot.com/assets/css3-buttons/css3-button-3.png" style="margin-top: 4px;"/></a></p>

<p>For the active state, we want to imagine that we’re depressing the button into the page. This means that the button will darken and have a shadow cast over it. We achieve this affect by adding a darker, larger inset box shadow to the button, along with making other elements of the button darker.</p>

<pre><code class="css">button:active {
  background: #3282d3;
  border: 1px solid #154c8c;
  border-bottom: 1px solid #0e408e;
  -moz-box-shadow: inset 0 0 6px 3px #1657b5, 0 1px 0 0 #fff;
  -webkit-box-shadow: inset 0 0 6px 3px #1657b5, 0 1px 0 0 #fff;
  text-shadow: 0 -1px 1px #2361a4;
}</code></pre>

<h3>Finally, the disabled state

</h3>
<p><a href="http://ui.thoughtbot.com/assets/css3-buttons/"><img src="http://ui.thoughtbot.com/assets/css3-buttons/css3-button-4.png" style="margin-top: 4px;"/></a></p>

<p>You make a disabled button like this:</p>

<pre><code class="html"><button disabled="disabled">Download iTunes</button></code></pre>

<p>We add the disabled style to the normal, hover and active states of the button to ensure that it appears fully disabled. We also changed the cursor style to reinforce that no action can be taken. (I tweaked my version a bit to remove the white bottom border found in the original.) </p>

<pre><code class="css">button[disabled],
button[disabled]:hover,
button[disabled]:active {
  background: #999;
  background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#dadada), to(#f3f3f3));
  border-top: 1px solid #c5c5c5;
  border-right: 1px solid #cecece;
  border-bottom: 1px solid #d9d9d9;
  border-left: 1px solid #cecece;
  color: #8f8f8f;
  box-shadow: none;
  -moz-box-shadow: none;
  -webkit-box-shadow: none;
  cursor: not-allowed;
  text-shadow: 0 -1px 1px #ebebeb;
}</code></pre>

<h3>Extra credit</h3>

<p>Rounded corners in CSS can sometimes look a bit jagged. In WebKit browsers, you can use this line to improve their appearance:</p>

<pre><code class="css">-webkit-background-clip: padding-box;</code></pre>

<p>You’ll want to add this line after you declare the background, <a href="http://tumble.sneak.co.nz/post/928998513/fixing-the-background-bleed">as described in this post</a>.</p>

<p>In Firefox, the <code>button</code> element gets a bit of extra height that you can partially eliminate using this declaration:</p>

<pre><code class="css">button::-moz-focus-inner {
  border: 0;
}</code></pre>

<p>In my experience, buttons in Firefox still end up a bit taller than in WebKit browsers, however.</p>

<h3>And now the caveats</h3>

<p>This almost exact reproduction of the Photoshop button is possible in Chrome and Safari on the Mac, with Firefox being almost there. Chrome on Win/Linux <a href="http://code.google.com/p/chromium/issues/detail?id=29427">currently has a bug</a> that affects buttons that use both rounded corners and an inset box-shadow. <a href="http://twitter.com/#!/paul_irish/status/21739945295085568">A fix should be coming soon</a>. As expected, in Internet Explorer these buttons will fall back to a lesser-styled, but still functional look.</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/KoSaWM2jWyk/2718077289";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2718077289";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Wed, 12 Jan 2011 16:25:00 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:3:{i:0;a:5:{s:4:"data";s:4:"css3";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:10:"web design";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:6:"design";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2718077289";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:12;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:5:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:35:"Ongoing refactoring and client work";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:5508:"<p>Anyone who has done client work or worked inside an organization where the priority is on “new” has faced this dilemma: how do you “sell” housekeeping/maintenance and refactoring tasks up the chain of command to your boss or your client?  Often times developer claims about wanting or needing to do refactoring work, maintenance tasks, “small tweaks”, etc - are dismissed because they don’t demonstrate immediate progress to the application, or don’t deliver on any new business requirements.</p>

<h2>What is refactoring?</h2>

<blockquote>
  <p>By continuously improving the design of code, we make it easier and easier to work with. This is in sharp contrast to what typically happens: little refactoring and a great deal of attention paid to expediently adding new features. If you get into the hygienic habit of refactoring continuously, you’ll find that it is easier to extend and maintain code.</p>
</blockquote>

<p>-Joshua Kerievsky, Refactoring to Patterns</p>

<p>That definition is fine for my purposes here, let’s use that.</p>

<p>I think most of the objection to “allowing” developers to do refactoring tasks come from a misunderstanding, but it’s important as a developer to make sure you’re on the right side of the fence on this matter.  There are certain tasks which really are a huge waste of time, there are certain tasks which are almost critical to stop what you’re doing and deal with, but the majority are probably somewhere in the middle.</p>

<h2>It’s about the context</h2>

<p><img src="http://media.tumblr.com/tumblr_letkvqUncX1qz4sb2.jpg" alt=""/></p>

<p>I think things are somewhat context specific.  If your manager has let you know about an important feature that needs to get out, and you insist on renaming some variables instead, that’s probably not legitimate refactoring - you should get the feature out.  If the only tasks in the feature queue are things like copy changes and style tweaks, you’ve probably got time to proactively go in and move some code around.  Those are the edge cases though, ignoring the majority is how you get into trouble.</p>

<p>The majority?  Yes.  It takes day to day refactoring to stay on top of problems.  If you ignore developing code smells, long methods, crazy hacks that were done to solve a problem quickly, they’ll start to accumulate.  Pretty soon you cross over the line from “I wish I had a few hours to clean up these small things” to “I really can’t get any work done at all because this is such a huge mess”.  The key is to explain to your managers that there’s nothing wrong about that.  Even the best programmers will accumulate code cruft if things aren’t revisited from time to time.</p>

<p>Requirements change over time.  Best practices are moving targets.  Web frameworks and languages add new features.  New libraries are released that solve old problems in new elegant ways.  And so on.</p>

<p>Get a boss that understands that.  Work for clients that trust you on those facts.  Give them my phone number if they don’t believe you.</p>

<h2>What to do</h2>

<p>Here are some things we do to encourage code quality and commit to ongoing improvement:</p>

<p><img src="http://media.tumblr.com/tumblr_letknqgvFQ1qz4sb2.jpg" alt=""/></p>

<p><em>Explain the agile process to clients.</em>  Specifically, explain how things are in an ordered queue, and how they have a priority.  Once that’s done, you can work as a peer to make sure that refactoring and maintenance tasks get into the queue and prioritized alongside new feature work.</p>

<p><em>Do periodic code reviews.</em>  If you can do this weekly, great.  At worst, do it monthly.  On some projects, we’ve made it a requirement to use a “feature branch” in the git repository, and required that another developer review literally every commit before it makes it’s way into master.  This can be overkill on a small project, but it’s worked great once you get more than a few developers.</p>

<p><em>Have written code standards that evolve over time.</em>  It’s important to write them down, because it creates an objective reference to point to when you see someone else do something weird, or aren’t sure what to do yourself.  It’s important that they can evolve, because when there’s legitimate disagreement about how to best do something on the team you need to take a moment to revise the standards to account for whatever differences you have.  When that fails, call in a third party to help sort it out.</p>

<p><em>Explain the TDD process.</em>  Make sure clients and bosses understand why you write tests.  When you explain <a href="http://msdn.microsoft.com/en-us/library/aa730844(v=vs.80).aspx">Red Green Refactor</a> …. don’t skip the refactor step!</p>

<h2>But how do I show the client what I did?</h2>

<p>It’s all about trust and expectations.  If you haven’t explained how this works to clients who don’t know any better, they have every right to demand that every hour of time you put into their project result in something new they can see.  If you do explain how maintenance and refactoring and constant quality improvement works, then you’ve set the expectation correctly and they shouldn’t be surprised when tasks that “just change code you already wrote” are showing up in the queue, the changelog and the invoices.</p>

<p>Do any of you have stories of success (or failure) in explaining this issue to your clients, managers or coworkers?</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/LnVqYAOoGFo/2685998010";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2685998010";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Mon, 10 Jan 2011 13:07:00 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2685998010";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:13;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:5:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:37:"PostgreSQL performance considerations";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:7433:"<p>There are a number of variables that allow a DBA to tune a PostgreSQL database server for specific loads, disk types and hardware. These are fondly called the GUCS (Global Unified Configuration Settings) and you can take a look via the <code>pg_settings</code> view. There are also a few of things that you can do in your application to get the most out of Postgres:</p>

<h3>Know the postgres index types</h3>

<p>By default <code>CREATE INDEX</code> will create B-tree indexes which will serve well for most cases where we use equality, inequality and range operators. However there are cases where you can build different indexing strategies with GiST (Generalized Search Tree) indexes. For example, Postgres ships with built in GiST operator classes for <a href="http://www.postgresql.org/docs/9.0/static/functions-geometry.html">geometric operators</a> — for dealing with the geometric types like point, box, polygon, circle, and others. There are more interesting <a href="http://www.postgresql.org/docs/9.0/static/gist-examples.html">GiST index examples</a> in the contrib packages for things like textual search, tree structures, and more.</p>

<h3>Consider multicolumn indexes, when it makes sense</h3>

<p>When your query filters the data by more than one column, be it with the <code>WHERE</code> clause or <code>JOINs</code>, multicolumn indexes may prove useful. If you create an index on columns (a, b), the Postgres planner can use it for queries</p>

<pre><code>WHERE a = 1
WHERE a = 1 AND b = 2</code></pre>

<p>However, it will not use it for queries using:</p>

<pre><code>WHERE a = 1 OR b = 2
WHERE b = 2</code>.</pre>

<p>But Postgres also has the ability to use multiple indexes in a single query. This may come in handy if you are using the <code>OR</code> operator, but will also make use of it for <code>AND</code> queries. So it boils down to what the most common case is according to your application’s read patterns and optimize for that, either with an an index on (a, b) and another on (b), or two separate single column indexes.</p>

<h3>Partial indexes</h3>

<p>Simply put, a partial index is an index with a <code>WHERE</code> clause. It will only index rows that match the supplied predicate. You can use them to exclude values from an index that you hardly query against.</p>

<p>For example, you have an <code>orders</code> table with a <code>completed</code> flag. The sales people want to know what orders over $100,000.00 haven’t been completed because they want to collect their bonuses, so you build a view in your app to show them just that (and negotiate a cut on the bonus). You could create the following index:</p>

<pre><code>CREATE INDEX orders_incomplete_amount_index
   on orders (amount) WHERE complete is not true;</code></pre>

<p>Which will be used by queries of the form:</p>

<pre><code>SELECT * FROM orders
  where amount > 100000 AND complete is not true;</code></pre>

<h3>Don’t over index</h3>

<p>Part of maintaining a healthy database is going back and making sure you don’t have any unused indexes. It’s common to add indexes to address a specific performance issue for a particular query, but in many cases indexes start to pile up becoming dead weight. Remember that the more indexes you have, the slower INSERTs will become because more writes will need to happen to keep the indexes updated.</p>

<h3>Keep statistics updated</h3>

<p>Make sure to run <code>VACUUM ANALYZE</code> to keep data statistics up to date — as well as recover disk space. In addition, Postgres ships with a built in <code>auto-vacuum daemon</code> whose purpose is to automate the execution of <code>VACUUM ANALYZE</code>. You should <a href="http://www.postgresql.org/docs/9.0/static/routine-vacuuming.html">read up</a> on considerations for setting the auto-vacuum daemon’s frequency according to your database size and usage characteristics.</p>

<p>Make sure you ANALYZE when creating a new index, otherwise Postgres will not have analyzed the data and determined that the new index may help for the query.</p>

<h3>Use more joins</h3>

<p>Postgres is perfectly capable of joining multiple tables in a single query. In a running app, queries with five joins are completely acceptable, and will help bring in the data required by your app, reducing the number of trips to the database. In most cases, joins are also a better solution than subqueries — Postgres will even internally “rewrite” a subquery, creating a join, whenever possible, but this of course increases the time it takes to come up with the query plan. So be a pal and use joins instead of subselects.</p>

<h3>Prefer INNER JOINs</h3>

<p>If the cardinality of both tables in a join is guaranteed to be equal for your result set, always prefer doing an <code>INNER JOIN</code> instead of a <code>LEFT OUTER JOIN</code>. A lot of research and code has gone into optimizing outer joins in Postgres over the years. But the reality is that especially as more joins are added to a query, left joins limit the planner’s ability optimize the join order.</p>

<h3>Know how to understand the explain output</h3>

<p>Paste the output of <code>explain analyze [some query]</code> into <a href="http://explain.depesz.com/">explain.depesz.com</a> to help identify the most costly nodes in the query plans.</p>

<p>Understanding <code>EXPLAIN</code> output is a very extensive topic, but these are some general guidelines when reading plans:
</p>
<ul>
<li>Are the cost estimates vs. actuals close, or are there discrepancies? Typically a sign of not having ANALYZEd recently.</li>
  <li>Is an index not being used? The planner may be choosing not to use it for good reason.
  </li>
<li>Is there query using the <code>some_string LIKE pattern</code>? If so, make sure the pattern is anchored at the beginning of the string. Postgres can use an index when doing <code>some_string LIKE 'pattern%'</code> but not for <code>some_string LIKE '%pattern%'</code>
</li>
  <li>Have you vacuumed recently? Have you indexed foreign keys?</li>
  <li>Are there table scans that should use an index instead? Not all table scans are bad — there are cases where it will perform better than an index scan</li>
  <li>Good database schema design yields better query plans. Read up on <a href="http://en.wikipedia.org/wiki/Database_normalization">database normalization.</a>
</li>
</ul>
<h3>Never try to optimize queries on your development machine</h3>

<p>The Postgres planner collects statistics about your data that help identify the best possible execution plan for your query. In fact, it will just use heuristics to determine the query plan if the table has little to no data in it. Not only do you need realistic production data in order to analyze reasonable query plans, but also the Postgres server’s configuration has a big effect. For this reason it’s required that you run your analysis on either the production box, or on a staging box that is configured just like production, and where you’ve restored production data.</p>

<h3>Experimentation is key</h3>

<p>There are no hard and fast rules to a perfectly optimized system. The best advice is to try out different configurations, use a tool like <a href="http://newrelic.com/">NewRelic</a> to find out what the bottlenecks are, and liberally try out different combinations of indexes and queries that yield best results for your particular situation.</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/-KkdBhf7v7c/2638538135";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2638538135";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Fri, 07 Jan 2011 12:26:02 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2638538135";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:14;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:6:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:25:"Design Driven Development";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:5456:"<p>Most of my thoughts about design spawn from asking myself what makes a project successful. Well, what does? Most will agree that good design does. This is not speaking exclusively about the graphic design or implying that everything rests solely upon the shoulders of the Designer. <strong>Everyone is a designer. Design is a fundamental part of everything.</strong> Keep this philosophy in mind for the entirety of the project.</p>

<h2>How we guide projects</h2>
<p>thoughtbot has always been known primarily for its Rails expertise and as such the projects have been driven majorly by the development, headed by a Lead Developer.</p>

<p>Over the last year or so, with the addition of new designers to the team, we were able to focus much more on design. We’ve started with design first, as we should, and this has been quite successful. The general practice was to do our research, form our wireframes, and move onto the visual design. The problem is, once we got past the initial design steps our process would splinter a little. Design would still be important and never forgotten but a detachment formed between the design and  the development.</p>

<p>Now, we want to fix this. We need to make sure that whatever we’re working on is the most beneficial thing to the end user. We work off user stories and shouldn’t pick ones to work on because they’re easy or need to get done eventually. The user stories should be prioritized with good design in mind. We must stay vigilant in creating the best possible product for the target audience. A great way to accomplish this is to keep the design of all things at the forefront of our thought processes. Keeping a project driven by design will help this happen.</p>

<h2>The improved way</h2>
<p>
As of late we’re beginning to drive projects with design from start to finish. As I hinted at already, this does not mean a project should revolve around the graphic design or visual aspects. This means the design of <strong>everything</strong> should be well thought out. From things as simple as structuring the meetings well, to things as complex as building the code properly, to things as crucial as wireframing the flow of the app. Design should be at the forefront of our thoughts in every step of the building process.</p>

<h2>Things to help improve</h2>
<p>We’ve had great success with a few things lately. None of them are new ideas but sometimes we just forget about them. They are all things that both a designer and/or a developer can accomplish.</p>

<h3>For early prototypes, faster and simpler is better than slower and more polished</h3>
<p>Recently on one of our projects we wanted to test out a proposed flow for a new app. In a day or two we were able to bust out some very unsexy but very understandable HTML wireframes. They were clickable, buttons did what you expected them too, and you could navigate between pages. The app didn’t have any real functionality but it helped both the client and us easily identify trouble spots and conversely figure out what was working best. This was immensely helpful and saved quite a bit of time in the long run.</p>

<h3>User test early, refine, user test again</h3>
<p>On another recent project we wanted to get something in front of people as early as possible. Similar to the wireframes in the last section, the app did not work. It was a little more polished but really just a pretty wireframe. The difference between this and the previous method was the people running through the app were not part of the team. Even having a few people unfamiliar with the app click through and share immediate thoughts let us rapidly modify the app and only a week later, test again. Over the course of 5 weeks we did this 3 times. The client is pleased (and enjoyed listening to the feedback) and the app is undoubtedly in better shape than it would have been if we waited longer to user test.</p>

<h3>Keeping designers, developers, and clients connected</h3>
<p>One of the biggest problems, in my opinion, is having the design and development relationship splinter as the project grows, both roles will just work on what they feel is best without consulting one another.</p>

<p>There are a few things you can do to help avoid this. The biggest aid, in my opinion, is designers, developers, and clients work physically close to each other. Members of teams at thoughtbot all sit together, and we’ve undeniably had our best results when the client was able to work with us in person. We can easily verbally communicate at a moments notice. We’ve found that asking user and goal related questions, discussing as a team, and coming up with the best solutions really helps to keep us on track and work as one unit. Questions like:</p>

<ul>
<li>Who are the users?</li>
<li>What are the primary goals for the users to accomplish?</li>
<li>What things need to happen in order for the users to perform these actions?</li>
</ul>
<h2>Try it out</h2>
<p>To facilitate these ideas, whoever is best fitted and most comfortable to fill a role that focuses on designing for the user experience should be the project lead. This can be a designer or a developer. <strong>Everyone is a designer.</strong> Everyone helps the design process. So, if you haven’t tried this process yet, give it a shot on your next project. Embrace well thought out design in all aspects of your project, and see if you don’t feel better about the end result.</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/F7N-KLXcDAY/2609622814";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2609622814";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Wed, 05 Jan 2011 14:47:51 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:1:{i:0;a:5:{s:4:"data";s:6:"design";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2609622814";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:15;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:5:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:29:"AjaxRecorder: is this insane?";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:4040:"<p>This week, <a href="http://thoughtbot.com/about/#mmongeau">Matt</a> and I were converting pagination in an app to Ajax pagination. In the process, we broke the build.</p>

<p>The failing feature looked something like this:</p>

<pre><code>When I follow "Next page"
And I comment on "Ford" with "Fjord is a better name for a car."
Then I should be on the second page
And I should see the "Fjord is a better name for a car." comment
</code></pre>

<p>The implementation of “I should be on the second page” expected that this query string existed: <code>page=2</code>. When we switched to use Ajax, we could no longer check the query string in the same way.</p>

<h2>Is this insane?</h2>

<p>We came up with the following implementation, and used <a href="http://robots.thoughtbot.com/post/1658763359/thoughtbot-and-the-holy-grail">Akephalos</a> to make sure the Javascript was integrated into the test:</p>

<pre><code>When I follow "Next page"
And I comment on "Ford" with "Fjord is a better name for a car."
Then the comment on "Ford" should have been made via Ajax
And I should see the "Fjord is a better name for a car." comment
</code></pre>

<p>It uses this code from features/support/ajax_recorder.rb:</p>

<pre><code>class AjaxRecorder
  def self.clear
    @@records = []
  end

  def self.save(env)
    @@records << env
  end

  def self.has_path?(path)
    @@records.any? { |record| record['REQUEST_URI'] == path }
  end
end

class AjaxRecorderApp
  def initialize(app)
    @app = app
  end

  def call(env)
    if env['HTTP_X_REQUESTED_WITH'] == 'XMLHttpRequest'
      AjaxRecorder.save(env)
    end
    @app.call(env)
  end
end

Capybara.app = AjaxRecorderApp.new(Capybara.app)

Before do
  AjaxRecorder.clear
end
</code></pre>

<p>If it’s not clear, we wrote a Rack app that records Ajax requests into the <code>@@records</code> class variable on <code>AjaxRecorder</code>, and inserted it as middleware into our Cucumber/Capybara/Akephalos stack.</p>

<p>We were then able to use <code>AjaxRecorder.has_path?</code> via RSpec in features/step_definitions/ajax_steps.rb:</p>

<pre><code>Then /^the comment on "(.*)" should have been made via Ajax$/ do |value|
  response = fetch_moderated_response(value)
  path     = clients_moderated_response_moderated_comments_path(response)

  AjaxRecorder.should have_path(path)
end
</code></pre>

<h2>This is testing implementation, not behavior!</h2>

<p>One reason this might be insane is that it appears to be testing implementation instead of behavior. Users don’t care about “Ajax”, they care that the site loads the new comment quickly, on the correct page.</p>

<h2>How else could we test this?</h2>

<p>There are at least two advantages to this test, however:</p>

<ul>
<li>We’re confident we’ve tested the Javascript code path, and testing is partly about developer confidence.</li>
<li>In combination with the “I should see” step checking the state of the page, we’re closer to testing the user experience.</li>
</ul>
<h2>How can we test user experience?</h2>

<p>There are certain factors of a web application that are important but a little difficult to capture in Cucumber scenarios. Factors like:</p>

<ul>
<li>The app should be fast.</li>
<li>The content should be organized well.</li>
<li>I should be able to find and do stuff easily.</li>
</ul>
<p>Maybe they’re not impossible to capture if we’re willing to use implementation details such as <code>XMLHttpRequest</code> as a proxy for those factors, then tie that implementation to our user experience intent using language in our Cucumber steps:</p>

<pre><code>Then the comment on "Ford" should have been posted quickly, without reloading the page, and with brief visual feedback
</code></pre>

<p>“without reloading the page” would be implemented using our <code>AjaxReloader</code>, “posted quickly” could be implemented using a timer/benchmark, and “brief visual feedback” could check that we pulsed/highlighted the new comment.</p>

<p>What do you think? Is this insane?</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/yXkJyUcUl3k/2599288726";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2599288726";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Tue, 04 Jan 2011 16:00:07 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2599288726";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:16;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:5:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:80:"Use Deadweight and your integration suite to automatically find unused CSS rules";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:3618:"<p>We’re refactoring the CSS in Hoptoad - the app is a few years old, and has been through several rounds of design improvement.  We’re looking to combine duplicated rules, make selectors more intention-revealing, and want to reorganize the stylesheets to reflect our current best practices.  We’re also switching to SASS, which we’ve found to be a tremendous help.  Together, these improvements should cut developer and designer time during maintenance and future design improvements.</p>

<p>Before diving in, we wanted to know what CSS is used or unused.</p>

<p><a href="https://github.com/aanand/deadweight">Deadweight</a> is an excellent tool for identifying unused CSS selectors.  It’s flexible, too: you can identify paths in your application for deadweight to scan, or use it as an HTTP proxy and click around in your site, or just pass it static HTML files to analyze.  There are a few caveats (for example, selectors inserted by Javascript aren’t tracked) but it’s generally a solid approach for finding unused CSS rules.</p>

<p>I didn’t want to spend a lot of time clicking through the site, and wanted to eliminate the possibility that I would forget a page or two to include.  I decided to run the Hoptoad integration tests (Cucumber features, in this case) and capture the response bodies.</p>

<h2>Rack middleware to the rescue</h2>

<p>I wrote the following piece of Rack middleware:</p>

<pre><code>class ResponseLoggerMiddleware
  RESPONSE_LOG_DIR = Rails.root.join('log', 'responses')
  Dir.mkdir(RESPONSE_LOG_DIR) unless Dir.exist?(RESPONSE_LOG_DIR)

  def initialize(app)
    @app = app
  end

  def call(env)
    response = @app.call(env)
    log(response)
    response
  end

  def log(rack_response)
    code, headers, response = rack_response

    if response.respond_to?(:body)
      html = response.body
      filename = "response_#{Time.now.to_f}.html"
      File.open(RESPONSE_LOG_DIR.join(filename), 'wb') do |file|
        file.puts(html)
      end
    end
  end
end
</code></pre>

<p>and included it:</p>

<pre><code># For Rails 2, include in config/environment.rb
# For Rails 3, include in config/application.rb
# Why Rack::Lock? <a href="http://guides.rubyonrails.org/rails_on_rack.html#internal-middleware-stack">http://guides.rubyonrails.org/rails_on_rack.html#internal-middleware-stack</a>
config.middleware.insert_after 'Rack::Lock', 'ResponseLoggerMiddleware'
</code></pre>

<p>After the tests ran, I processed the output with deadweight:</p>

<pre><code>$ gem install deadweight
$ cat public/stylesheets/*.css | deadweight log/responses/*
</code></pre>

<p>Ta-da!  If you’re curious what Deadweight output looks like, here’s what I got: <a href="https://gist.github.com/cf34709887bf63b1ec15"><a href="https://gist.github.com/cf34709887bf63b1ec15">https://gist.github.com/cf34709887bf63b1ec15</a></a></p>

<h2>Further reading</h2>

<ul>
<li>
<a href="http://railscasts.com/episodes/180-finding-unused-css">Ryan Bates’ Railscast on Deadweight</a> will get you familiar with the tool.</li>
<li>The <a href="https://github.com/geuis/helium-css">Helium tool</a> lets you drop a piece of JavaScript on your site and paste in a list of URLs, and will compute unused CSS selectors.</li>
<li>SitePoint’s <a href="http://www.sitepoint.com/dustmeselectors/">Dust-Me Selectors</a> is a Firefox plugin that identify unused CSS selectors.  It can spider through your site with a sitemap, too.</li>
</ul>
<h2>Extra credit</h2>

<p>You could bundle this all up into a rake task, run it on your CI server, and fail the build whenever there are new unused CSS rules.</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/iPmfyMwQ6tI/2597579897";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2597579897";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Tue, 04 Jan 2011 13:18:08 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2597579897";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:17;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:6:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:13:"Twiddle Wakka";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:2795:"<p>Do you know the <a href="http://twiddlewakka.com/">twiddle wakka</a>? It looks like this:</p>

<pre><code>~>
</code></pre>

<p>You’ve seen it in your Gemfile. Here’s an example</p>

<pre><code>gem "rails", "~> 3.0.3"
gem "thin",  "~> 1.1"
</code></pre>

<p><code>~> 3.0.3</code> means that when you <code>bundle install</code>, you’ll get the highest-released gem version of <code>rails</code> between the range >= 3.0.3 and < 3.1.</p>

<p><code>~> 1.1</code> means that when you <code>bundle install</code>, you’ll get the highest-released gem version of <code>thin</code> between the range >= 1.1 and < 2.0.</p>

<p>I learned the name “twiddle wakka” at <a href="http://twitter.com/copiousfreetime">Jeremy Hinegardner</a>’s Rubyconf 2010 talk, <a href="http://www.slideshare.net/copiousfreetime/gemology">Anthropology of Ruby</a>. During a data-driven analysis of the ecosystem of Rubygems, he found the twiddle wakka is used infrequently and asked the Ruby community to use it more.</p>

<p>Using the twiddle wakka in combination with consistent MAJOR.MINOR.PATCH versioning by gem authors, we can achieve better stability in our dependencies. Jeremy suggested reading two documents on consistent versioning:</p>

<ul>
<li><a href="http://apr.apache.org/versioning.html">Apache’s version numbering</a></li>
<li><a href="http://semver.org/">Semantic versioning</a></li>
</ul>
<p>In the comments of this post, David Chelimsky suggested a related document that is particularly relevant to us as Rubyists:</p>

<ul>
<li><a href="http://docs.rubygems.org/read/chapter/7">Rubygems Rational Versioning</a></li>
</ul>
<p>I think most people are in favor of this in principle but are not consistent in practice. This leads to confusion: “Which libraries are consistent and which aren’t? Is this gem safe to declare as a dependency at the major, minor, or patch level?”</p>

<p>It seems like a simple way of clearing up the confusion is for authors to declare their intention of consistent versioning by using the twiddle wakka in their README’s installation instructions. If I see this…</p>

<pre><code>gem "clearance", "~> 0.9"
</code></pre>

<p>… then, I feel the author is assuring me of the “safety” of this gem at the minor level.</p>

<p>Therefore, I’m editing the READMEs of our gems to declare our intention. Some may be “twiddle wakka’ed” at the major level, others at the minor level, and others at the patch level. That seems like a reasonable compromise to me since every project is at a different stage.</p>

<p>I’ve been guilty of being inconsistent about this in the past. Call it a New Year’s resolution, but I’d like be better about it in 2011.</p>

<p>What do you think? Is this README idea any good? Are you going to do the same?</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/St7S2Ymo0oQ/2508037841";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2508037841";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Wed, 29 Dec 2010 00:32:00 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:8:"category";a:5:{i:0;a:5:{s:4:"data";s:4:"ruby";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:7:"rubygem";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:10:"versioning";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:3;a:5:{s:4:"data";s:8:"software";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:4;a:5:{s:4:"data";s:6:"README";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2508037841";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:18;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:5:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:11:"Let it REST";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:4792:"<p>You are building a boring blog application. A blog has many comments. Your client gives you this user story:</p>

<blockquote>So that I can report inappropriate comments, as a user, I can mark a comment as spam.</blockquote>

<p>So you add a spam boolean attribute to the Comment model, and use the same <code>PUT to comments</code> to handle the update:</p>

<pre><code>class CommentsController < ApplicationController
  def update
    @comment = Comment.find(params[:id])
    if @comment.update_attributes(params[:comments])
      flash[:notice] = "Comment updated successfully"
      # redirect_to ...
    else
      flash[:error] = "Something broke"
      # redirect_to ...
    end
  end
end</code></pre>
<img src="http://ui.thoughtbot.com/assets/spam.jpg" alt="spaaaaam" style="float: right;"/><p>By sending the right params down from the view, this can still work. But a day passes by and people start abusing the darn spam button. This <em>is</em> the internet after all. So your client adds a couple of stories:</p>

<blockquote>So that I’m aware I screwed up, as a user, I receive an email notification when my comments get spammed.</blockquote>
<blockquote>So that I can moderate spammed comments, as an admin, I receive an email notification when comments are spammed. </blockquote>

<p>There’s now more going on when we spam a comment. A first shot at implementing these stories could make use of <a href="http://ar.rubyonrails.org/classes/ActiveRecord/Dirty.html">ActiveRecord’s dirty attributes</a> to figure out if the spam boolean changed from false to true, in which case we deliver the two notifications:</p>

<pre><code>class Comment < ActiveRecord::Base
  before_save :send_spam_notifications, :if => marking_as_spam?
  def send_spam_notifications
    Mailer.comment_owner_spam_notification(self).deliver
    Mailer.admin_spam_notification(self).deliver
  end

  def marking_as_spam?
    self.spam_changed? && self.spam?
  end
end</code></pre>

<p>Nice and clean, right? <em>Wrong</em>.I think there’s a couple of problems with this. First of all, we are cluttering our comment class with conditional callbacks. Sometimes you have no choice, but I’d rather avoid them when possible. Secondly, we’re using the same HTTP endpoint and controller action for two very different things. One is that of editing my comment, and the other is for marking a comment as spam — which is arguably an <a href="http://www.objectmentor.com/resources/articles/srp.pdf" alt="SRP principle">SRP violation</a> (PDF link).</p>

<p>We have a couple of options for cleaning up. We could create a <code>#update_spam_status</code> action on the comments controller, but this deviates from our otherwise RESTful API. Instead, let’s break it out to it’s own resource called <code>Spams</code>, and instead of a <code>PUT to comment</code>, let’s <code>POST to spam</code>:</p>

<pre><code>class SpamsController < ApplicationController
  def create
    @comment = Comment.find(params[:id])
    if @comment.mark_as_spam
      flash[:notice] = "Comment marked as spam"
      # redirect_to ...
    else
      # ...
    end
  end
end

class Comment < ActiveRecord::Base
  def mark_as_spam
    self.spam = true
    send_spam_notifications if valid?
    save
  end
end</code></pre>

<p>Our view can make use of a <code>button_to</code> that POSTs to the <code>spams</code> resource, instead of relying on updating via the comments resource. Note how a RESTful resource does not need to match 1-to-1 with a model, and this creates a much cleaner interface overall — with a few advantages:</p>

<ul id="reasons-you-should-do-this" class="be-restful">
<li>You clean up your model by creating a <code>#mark_as_spam</code> method that is clear and to the point, untangling some of the callback soup that can start to build up on models.</li>
  <li>You are creating a level of abstraction that allows you to code to an interface, making it trivial to change <code>#mark_as_spam</code>’s implementation to anything else, like an Akismet call, or a more complex Spam class.</li>
  <li>Splitting it out allows us to properly scope the CommentsController#update’s finder to the current user (<code>@comment = current_user.comments.find(params[:id])</code>), allowing any user to mark comments as spam, and only commenters to update their own comments.</li>
  <li>You can easily specify a more meaningful flash message for each case.</li>
</ul>
<p>The question then arises, when should we split out to a new resource? As always, it depends. For the most part it’s whenever it will help clean up your models and controllers. I find that if the update triggers any logic at all, it’s worth breaking out to its own resource and corresponding model method that encapsulates that logic.</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/5B4j3xgVLdU/2416732899";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2416732899";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Wed, 22 Dec 2010 10:45:00 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2416732899";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:19;a:6:{s:4:"data";s:0:"";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:5:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:44:"Yuletide Logs and MongoDB Capped Collections";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:7329:"<p>This Christmas, maybe you’re thinking of the long trip back home through snowy highways and bustling airports, spending time with the family next to a warm fireplace, or perhaps being serenaded by <a href="http://www.universalhub.com/2010/we-look-forward-shaq-throwing-relief-sox-april">The Big Maestro</a> himself. Sadly I didn’t get to see Shaq conduct the Pops, instead I’m thinking of how much <a href="http://www.mongodb.org/display/DOCS/Capped+Collections">Capped Collections</a> in MongoDB have made my job a bit easier.</p>

<h3>Warmup</h3>

<p>Here’s the problem: Lots of data coming in extremely frequently, on the order of several thousand discrete chunks of data every 5 seconds. Since it’s coming in too fast to be able to comprehend it, we really just want to show the last 15 chunks so the user. This lets the user know the service is accepting data, and it’s kind of neat to see data updating that fast in real time. My first implementation? ActiveRecord, of course.</p>

<pre><code>create_table "raws" do |t|
  t.text     "line"
  t.datetime "ran_at"
end
</code></pre>

<p>Seems simple enough. Since the data had to be parsed I tossed it into a background job, so it looked something like:</p>

<pre><code>class Parser
  attr_accessor :log
  def perform
    lines = ActiveSupport::Gzip.decompress(log).split("\n")
    lines.each do |raw_line|
      create_raw(DateTime.now, raw_line.strip)
    end  
  end  

  def create_raw(ran_at, line)
    Raw.create :ran_at => ran_at, :line => line
  end  
end</code></pre>

<p>Yes, I was pretty stupid and my first implementation just gzipped the data and shot it to the server. We’re now using a proper JSON API hooked up with <a href="https://github.com/brianmario/yajl-ruby">yajl-ruby</a>, but the real problem here had two steps:</p>

<ol>
<li>Parse input</li>
<li>Create row for each chunk of data</li>
</ol>
<p>Moving to JSON/YAJL made parsing faster, but what about writing the data? I thought this seemed great until I left it running overnight, and big surprise: there were over a million rows. Ok, that’s fine, we don’t need to keep it all anyway…</p>

<pre><code>def perform
  Raw.delete_all(["created_at < ?", 1.minute.ago])
  # parsing/inserting code here
end
</code></pre>

<p>That still wasn’t enough, as I increased traffic to that endpoint. Before I refactored how this endpoint accepted data, the table actively had 50,000 rows in it (and that’s just the last minute of data), and we were around the 140 millionth primary key dished out. This was simply storing too much input, and given that we only needed to ever show the last few pieces of it, there had to be a better way to model the data.</p> 

<h3>Flurries</h3>

<p>I had to sit back and consider my options here. I couldn’t figure out a way to implement this kind of write heavy behavior in SQL after poring over the PostgreSQL docs and mailing lists.</p>

<p>I still consider most NoSQL solutions to be awesome <a href="http://nosql.mypopescu.com/post/836086276/presentation-redis-persistence-power-or-redis-use">utility belts</a> to be used along side of relational data stores. I turned to Redis first. This could have used a simple Redis list like so:</p>

<pre><code># in config/initializers/redis.rb
$redis = Redis.new

# when writing data
$redis.lpush("latest-data", JSON.dump(line))
$redis.ltrim("latest-data", 0, 15)

# when reading data
raws = $redis.lrange("latest-data", 0, -1)
raws.map { |raw| JSON.parse(raw) }</code></pre>

<p>This definitely would have been faster, since Redis is all in memory, and the <a href="http://code.google.com/p/redis/wiki/LtrimCommand">LTRIM</a> command will basically keep a list short.</p>

<p>The reads are kind of awkward though, since we’re storing more than one tidbit of data (when the data was parsed, and the data itself) and we plan on adding more later. Since Redis only understands strings, it seemed awkward to use this solution. YAJL would make short work of it, but when we also have to maintain the size of the list ourselves, it seems like there could be a more natural and built-in way of modeling this problem.</p> 

<h3>Blizzard</h3>

<p>I next looked at MongoDB. I had a great introduction during <a href="http://www.10gen.com/conferences/mongoboston2010">MongoBoston</a>, and I heard of <a href="http://www.mongodb.org/display/DOCS/Capped+Collections">Capped Collections</a> but it didn’t click until…</p>

<blockquote>
<p>Capped collections are fixed sized collections that have a very high performance auto-FIFO age-out feature (age out is based on insertion order). […]</p>

<p>In addition, <b>capped collections automatically, with high performance, maintain insertion order for the objects in the collection;</b> this is very powerful for certain use cases such as logging.</p>
</blockquote>

<p>Booyah! I immediately hooked up a free <a href="https://mongohq.com/home">MongoHQ</a> plan and got started. The <a href="http://api.mongodb.org/ruby/">Mongo ruby driver</a> is pretty easy to use, after reading some tutorials I ended up with a decent solution.</p>

<p>First off, connecting to MongoHQ on Heroku was a bit irksome to discover, so here’s a sample if you can’t find why this isn’t documented properly. It includes hooking up the <code>Rails.logger</code> and using environments properly on your local machine.</p>

<pre><code># in config/initializers/mongo.rb
if ENV['MONGOHQ_URL']
  uri    = URI.parse(ENV['MONGOHQ_URL'])
  conn   = Mongo::Connection.from_uri(ENV['MONGOHQ_URL'], :logger => Rails.logger)
  $mongo = conn.db(uri.path.gsub(/^\//, ''))
else
  $mongo = Mongo::Connection.new(nil, nil,  :logger => Rails.logger).db("app_#{Rails.env.downcase}")
end</code></pre>

<p>And our capped collection write implementation:</p>

<pre><code>class Tail
  def self.insert(line)
    collection.insert(
      :at => Time.at(line['at']),
      :command => line['command'])
  end  

  def self.collection
    @collection ||= $mongo.create_collection("tail",
      :capped => true, :max => 15)
  end  
end</code></pre>

<p>Creating a capped collection is pretty simple, you can specify the number of max documents it can have or bytes total. <code>Mongo::DB#create_collection</code> won’t blow away an existing collection, so it’s ok to keep calling it in this class.</p>

<p>Reading from the capped collection is simple, except that Mongo insists on always returning a <code>BSON::ObjectId</code> on every document. That’s not necessary to show the user, so I end up filtering it out in Ruby:</p>

<pre><code>class Tail
  def self.last
    collection.find.to_a.tap do |tails|
      tails.each do |tail|
        tail.delete('_id')
      end  
    end  
  end
end</code></pre>

<p>In practice, each <code>Tail</code> collection is segmented out by users, and MongoHQ even provides a nice interface to browse what’s in your database:</p>

<img src="https://img.skitch.com/20101221-n4m6paywf2t1dk4gffict62pty.png"/><h3>Clear Skies</h3>

<p>Overall, I think a few MongoDB capped collections served this use case extremely well over going with Postgres or Redis. Use the best tool for the job, and it’s even better if someone else runs the tool for you. If you have similar use cases of bringing in NoSQL DBs along side of relational DB’s, let us know in the comments!</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:96:"http://feedproxy.google.com/~r/GiantRobotsSmashingIntoOtherGiantRobots/~3/b_kCEveUcQU/2403360445";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2403360445";s:7:"attribs";a:1:{s:0:"";a:1:{s:11:"isPermaLink";s:5:"false";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Tue, 21 Dec 2010 11:10:28 -0500";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:1:{s:8:"origLink";a:1:{i:0;a:5:{s:4:"data";s:44:"http://robots.thoughtbot.com/post/2403360445";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}}}s:27:"http://www.w3.org/2005/Atom";a:1:{s:4:"link";a:3:{i:0;a:5:{s:4:"data";s:0:"";s:7:"attribs";a:1:{s:0:"";a:3:{s:3:"rel";s:4:"self";s:4:"type";s:19:"application/rss+xml";s:4:"href";s:67:"http://feeds.feedburner.com/GiantRobotsSmashingIntoOtherGiantRobots";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:1;a:5:{s:4:"data";s:0:"";s:7:"attribs";a:1:{s:0:"";a:2:{s:3:"rel";s:3:"hub";s:4:"href";s:32:"http://pubsubhubbub.appspot.com/";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}i:2;a:5:{s:4:"data";s:0:"";s:7:"attribs";a:1:{s:0:"";a:2:{s:3:"rel";s:3:"hub";s:4:"href";s:29:"http://tumblr.superfeedr.com/";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:42:"http://rssnamespace.org/feedburner/ext/1.0";a:2:{s:4:"info";a:1:{i:0;a:5:{s:4:"data";s:0:"";s:7:"attribs";a:1:{s:0:"";a:1:{s:3:"uri";s:39:"giantrobotssmashingintoothergiantrobots";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:15:"browserFriendly";a:1:{i:0;a:5:{s:4:"data";s:138:"This is an XML content feed. It is intended to be viewed in a newsreader or syndicated to another site, subject to copyright and fair use.";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}}}}}}}}s:4:"type";i:128;s:7:"headers";a:11:{s:12:"content-type";s:23:"text/xml; charset=UTF-8";s:4:"etag";s:27:"k3hOhb7EZ4zWT8dekyT9yZ5StLM";s:13:"last-modified";s:29:"Tue, 22 Feb 2011 13:16:06 GMT";s:16:"content-encoding";s:4:"gzip";s:17:"transfer-encoding";s:7:"chunked";s:4:"date";s:29:"Tue, 22 Feb 2011 14:22:29 GMT";s:7:"expires";s:29:"Tue, 22 Feb 2011 14:22:29 GMT";s:13:"cache-control";s:18:"private, max-age=0";s:22:"x-content-type-options";s:7:"nosniff";s:16:"x-xss-protection";s:13:"1; mode=block";s:6:"server";s:3:"GSE";}s:5:"build";s:14:"20110128231735";}